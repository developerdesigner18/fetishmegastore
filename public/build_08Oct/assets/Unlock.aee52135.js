import{u as x,r as c,h as m,a as e,j as r,H as b,L as n,F as f}from"./app.b55b7b24.js";import"./TextInput.60bd8868.js";import"./Textarea.f039ae49.js";import{_ as i}from"./Translate.dc83ae5b.js";import"./react-toastify.esm.b0778105.js";import{A as k}from"./AuthenticatedLayout.add8c7e1.js";import{S as h}from"./Spinner.f7051ff4.js";import{M as o,b as v}from"./index.ed62628f.js";import"./Front.204303ed.js";import"./iconBase.c9d6e0f8.js";import"./index.aece37d8.js";import"./index.d226c3dd.js";import"./react-cookie-consent.esm.c359df54.js";import"./transition.b14c266a.js";import"./Modal.16eb4526.js";import"./index.e7e076b2.js";import"./index.esm.6c6b8a7f.js";function I({ebook:t}){const{props:p}=x(),a=p.auth,[l,d]=c.exports.useState(!1);if(c.exports.useEffect(()=>{(!a||!a.user)&&m.Inertia.visit(route("login"))},[a]),!a||!a.user)return e(h,{});const u=s=>{s.preventDefault(),console.log("Ebook to purchase:",t),m.Inertia.visit(route("ebook.purchase",{ebook:t.id}),{method:"POST",onBefore:g=>{d(!0)},onFinish:g=>{d(!1)}})};return r(k,{children:[e(b,{title:i("Unlock ebook: :ebookTitle",{ebookTitle:t.title_en})}),e("div",{className:"ml-0",children:r("div",{className:"p-4 sm:p-8 bg-gray-100 dark:bg-zinc-900 shadow sm:rounded-lg",children:[e("header",{children:r("div",{className:"justify-center flex items-center space-x-2 flex-wrap",children:[e("div",{children:e(n,{href:route("channel",{user:t.streamer.username}),children:e("img",{src:t.streamer.profile_picture,alt:t.streamer.username,className:"rounded-full h-14 border-zinc-200 dark:border-indigo-200 border"})})}),r("div",{children:[e(n,{href:route("channel",{user:t.streamer.username}),children:e("h2",{className:"text-center text-2xl font-medium text-gray-800 dark:text-gray-100",children:i("Unlock :ebookTitle",{ebookTitle:t.title_en})})}),e("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400 text-center",children:i("Confirm your purchase")})]})]})}),r("div",{className:"border-t pt-5 text-xl text-center font-light mt-8 dark:text-white",children:[r("p",{className:"bg-white shadow text-gray-800 font-semibold inline-flex rounded-lg p-2",children:[e(o,{className:"h-6 w-6"})," ",i("Price: :price tokens",{price:t.price})]}),e("br",{}),r("p",{className:"mt-3 bg-white shadow text-gray-800 text-sm font-semibold inline-flex rounded-lg p-2",children:[" ",e(v,{className:"w-4 h-4"})," ",i("Your Balance: :userBalance tokens",{userBalance:a.user.tokens})]}),e("div",{className:"mt-5 border-t pt-5",children:t.price<=a.user.tokens?r(f,{children:[r("button",{onClick:s=>u(s),className:"py-2 px-3 mt-2 mb-3 inline-flex rounded-md items-center bg-pink-500 text-white font-semibold hover:bg-pink-600 disabled:bg-gray-300 disabled:text-gray-700",disabled:l,children:[e(o,{className:"h-6 w-6 mr-2"}),e("div",{children:i("Purchase ebook")})]}),e("br",{}),l&&e("center",{children:e(h,{})})]}):r("div",{className:"text-gray-700 dark:text-white text-base",children:[i("You need to charge your token balance to be able to unlock this ebook"),e("br",{}),r(n,{href:route("token.packages"),className:"py-1.5 px-3 mt-2 inline-flex border-2 rounded-md hover:border-gray-700 hover:text-gray-700 items-center border-indigo-600 text-indigo-600 dark:border-white dark:hover:border-indigo-200 dark:hover:text-indigo-200",children:[e(o,{className:"h-6 w-6 mr-2"}),e("div",{children:i("Token Packages")})]})]})})]})]})})]})}export{I as default};
