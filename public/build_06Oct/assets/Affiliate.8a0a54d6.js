import{_ as i}from"./Translate.dc83ae5b.js";import{S as T}from"./SecondaryButton.d190bd81.js";import{R as v,o as B,u as O,j as m,a as e,F as E,h as k}from"./app.8657e2b6.js";import{S as P}from"./sweetalert2.esm.all.08ba7c87.js";import{F as w}from"./index.es.195684a1.js";import{f as _}from"./index.7b5c1ca0.js";import"./index.517f43d0.js";const N=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],C=()=>{};function A(t){function x(a){const s={},n={},c=N.map(d=>d.key);return Object.entries(a).forEach(d=>{let[l,h]=d;c.includes(l)&&v.isValidElement(h)?(s[l]=h,n[l]=" "):n[l]=h}),[s,n]}function p(a,s){Object.entries(s).forEach(n=>{let[c,d]=n;const h=N.find(y=>y.key===c).getter(t),u=B(h);u.render(d),a.__roots.push(u)})}function b(a){a.__roots.forEach(s=>{s.unmount()}),a.__roots=[]}return class extends t{static argsToParams(a){if(v.isValidElement(a[0])||v.isValidElement(a[1])){const s={};return["title","html","icon"].forEach((n,c)=>{a[c]!==void 0&&(s[n]=a[c])}),s}else return t.argsToParams(a)}_main(a,s){this.__roots=[],this.__params=Object.assign({},s,a);const[n,c]=x(this.__params),d=c.willOpen||C,l=c.didOpen||C,h=c.didDestroy||C;return super._main(Object.assign({},c,{willOpen:u=>{p(this,n),d(u)},didOpen:u=>{setTimeout(()=>{l(u)})},didDestroy:u=>{h(u),b(this)}}))}update(a){Object.assign(this.__params,a),b(this);const[s,n]=x(this.__params);super.update(n),p(this,s)}}}const f=A(P);function V({commissions:t=[],totalCommission:x=0,affiliateCode:p="",pagination:b={},currency:a}){const{auth:s,flash:n}=O().props,c=s.user,d="text-left font-semibold border-b py-2 px-4",l="py-2 px-4 border-b",h=o=>{navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(o).then(()=>{f.fire({toast:!0,position:"top-end",icon:"success",title:"Copied to clipboard",showConfirmButton:!1,timer:1500})}).catch(()=>u(o)):u(o)},u=o=>{const r=document.createElement("textarea");r.value=o,r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.focus(),r.select();try{const g=document.execCommand("copy");f.fire({toast:!0,position:"top-end",icon:g?"success":"error",title:g?"Copied to clipboard":"Copy failed",showConfirmButton:!1,timer:1500})}catch{f.fire({icon:"error",title:"Copy Failed",text:"Please copy manually."})}document.body.removeChild(r)},y=()=>{f.fire({title:i("Request Affiliate Vendor"),text:i("Do you want to request to become an affiliate vendor?"),icon:"question",showCancelButton:!0,confirmButtonText:i("Yes, request it!"),cancelButtonText:i("Cancel")}).then(o=>{o.isConfirmed&&k.Inertia.post(route("affiliate.submit"))})};return m("div",{children:[n.success&&e("div",{className:"mb-4 px-4 py-2 rounded text-green-800 bg-green-100 border border-green-300",children:n.success}),n.error&&e("div",{className:"mb-4 px-4 py-2 rounded text-red-800 bg-red-100 border border-red-300",children:n.error}),c.is_affiliate_vendor!==1?e(T,{onClick:y,className:"px-5 py-3 bg-indigo-800 border border-transparent rounded font-black text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:border-gray-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150",children:i("Become an Affiliate Vendor")}):c.affiliate_vendor_verifiy!==1?e("span",{className:"text-yellow-600 font-semibold",children:i("Wait for affiliate approval")}):m(E,{children:[p&&m("div",{className:"mb-6 flex items-center space-x-3",children:[m("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:[i("Affiliate Code"),":"]}),e("span",{className:"bg-gray-100 dark:bg-zinc-800 text-lg px-3 py-1 rounded border border-gray-300 dark:border-zinc-700",children:p}),e("button",{onClick:()=>{const o=p;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(o).then(()=>{f.fire({toast:!0,position:"top-end",icon:"success",title:i("Copied to clipboard"),showConfirmButton:!1,timer:1500})}).catch(()=>{f.fire({icon:"error",title:i("Copy Failed"),text:i("Clipboard access denied.")})});else{const r=document.createElement("textarea");r.value=o,r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{const g=document.execCommand("copy");if(document.body.removeChild(r),g)f.fire({toast:!0,position:"top-end",icon:"success",title:i("Copied to clipboard"),showConfirmButton:!1,timer:1500});else throw new Error("execCommand failed")}catch{document.body.removeChild(r),f.fire({icon:"error",title:i("Copy Failed"),text:i("Please copy manually.")})}}},className:"p-2 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 rounded hover:bg-gray-100 dark:hover:bg-zinc-700 transition",title:i("Copy"),children:e(w,{icon:_})})]}),c.affiliate_vendor_verifiy===1&&p&&m("div",{className:"mb-6",children:[e("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Your Affiliate Sharing Code"}),m("div",{className:"flex items-center space-x-2",children:[e("input",{type:"text",value:`${window.location.origin}?affiliate_code=${p}`,readOnly:!0,className:"flex-1 px-3 py-2 border rounded bg-gray-100 dark:bg-zinc-800 text-gray-800 dark:text-white"}),e("button",{onClick:()=>h(`${window.location.origin}?affiliate_code=${p}`),className:"p-2 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 rounded hover:bg-gray-100 dark:hover:bg-zinc-700 transition",title:"Copy",children:e(w,{icon:_})})]})]}),e("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:i("Commission History")}),m("div",{className:"text-lg font-semibold text-green-700 dark:text-green-400 mb-6",children:[i("Total Commission"),": ",a,Number(x).toFixed(2)]}),m("div",{className:"bg-white dark:bg-zinc-900 shadow rounded-lg overflow-x-auto",children:[m("table",{className:"w-full",children:[e("thead",{children:m("tr",{children:[e("th",{className:d,children:"#"}),e("th",{className:d,children:i("User")}),e("th",{className:d,children:i("Amount")}),e("th",{className:d,children:i("Date")})]})}),e("tbody",{children:t.length>0?t.map((o,r)=>m("tr",{children:[e("td",{className:l,children:r+1}),e("td",{className:l,children:o.username}),m("td",{className:l,children:[a,o.amount]}),e("td",{className:l,children:o.date})]},r)):e("tr",{children:e("td",{colSpan:"4",className:"py-4 text-center text-gray-500",children:i("No commission records found.")})})})]}),(b==null?void 0:b.links)&&e("div",{className:"mt-6 flex flex-wrap gap-2",children:b.links.map((o,r)=>e("button",{disabled:!o.url,onClick:()=>o.url&&k.Inertia.visit(o.url),className:`px-3 py-1 rounded border text-sm ${o.active?"bg-indigo-600 text-white":"bg-white dark:bg-zinc-800 text-gray-700 dark:text-gray-200"} ${o.url?"hover:bg-indigo-100 dark:hover:bg-zinc-700":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:o.label}},r))})]})]})]})}export{V as default};
