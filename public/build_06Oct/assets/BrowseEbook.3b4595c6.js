import{r as i,j as r,a as t,H as X,h as u,F as T}from"./app.8657e2b6.js";import{F as Y}from"./Front.2606f237.js";import{_ as a}from"./Translate.dc83ae5b.js";import{S as H}from"./SecondaryButton.d190bd81.js";import{F as Z}from"./index.esm.8525a373.js";import{S as q}from"./Spinner.362c36a0.js";import"./react-tooltip.min.dbaaf30d.js";/* empty css                          */import{M as ee}from"./Modal.10f8a02a.js";import"./Loader.6dcf0e03.js";import b from"./EbookLoop.4ae4de67.js";import te from"./SingleEbook.37985bc1.js";import{T as ae}from"./TextInput.dc5362aa.js";import{d as re}from"./react-cookie-consent.esm.46adfee2.js";import{a as le}from"./index.esm.644fb4c6.js";import{P as oe}from"./Pagination.dfc8bef2.js";import"./iconBase.efb5a903.js";import"./index.0271a3d0.js";import"./index.02c900e1.js";import"./index.a74bf29a.js";import"./react-toastify.esm.b3971d4c.js";import"./index.e7e076b2.js";import"./index.esm.e30f3812.js";import"./transition.6485defc.js";import"./SingleAudio.41707513.js";import"./AuthenticatedLayout.7a8757e7.js";import"./index.ce9d5702.js";import"./PrimaryButton.e11d2297.js";import"./index.3008a35f.js";function Le({userrequest:h,randomaudio:k,recommendedAudio:f,ebook:d,category:w,categories:I,exploreImage:B,tags:E,models:R,blocks:p,headTitle:L}){const[o,s]=i.exports.useState(h.sort||"Recently"),[v,$]=i.exports.useState(""),[j,m]=i.exports.useState(!1),[y,se]=i.exports.useState(!1),[A,D]=i.exports.useState(!1),[ie,O]=i.exports.useState(1),[U,N]=i.exports.useState(h.page||1);re(e=>{e.target.value.length>2?(m(!0),u.Inertia.reload({data:{keyword:e.target.value,sortBy:o},only:["ebook"],onFinish:()=>m(!1)})):u.Inertia.reload({data:{sortBy:o,keyword:""},only:["ebook"],onFinish:()=>m(!1)})},500),i.exports.useEffect(()=>{},[U]);const V=e=>{console.log("Page: ",e),N(e);let l=d.path+"?page="+e;u.Inertia.visit(l)},x=i.exports.useRef(),[C,S]=i.exports.useState(h.selectedCategories),[F,_]=i.exports.useState(h.selectedTags),[z,P]=i.exports.useState(h.selectedModels),W=e=>{e.preventDefault(),O(1),N(1),u.Inertia.visit(route("ebook.browse",{search:v,sort:o,selectedCategories:C,selectedTags:F,selectedModels:z}),{only:["ebook","randomaudio","recommendedAudio"],preserveState:!0,onBefore:()=>m(!0),onFinish:()=>m(!1)}),M()},G=e=>{const{value:l,checked:c}=e.target;S(c?n=>[...n,l]:n=>n.filter(g=>g!==l))},J=e=>{const{value:l,checked:c}=e.target;_(c?n=>[...n,l]:n=>n.filter(g=>g!==l))},K=e=>{const{value:l,checked:c}=e.target;c?(console.log("event",c),P(n=>[...n,l])):P(n=>n.filter(g=>g!==l))},Q=e=>{e.preventDefault();const l="fixed inset-0 z-[9999] pt-5 px-2 overflow-scroll h-screen bg-white dark:bg-black  block w-2/3 flex-shrink-0 mr-5";x.current.className=l},M=e=>{e==null||e.preventDefault();const l="hidden lg:block w-56 lg:flex-shrink-0 lg:mr-5";console.log(`hiding filters ${l}`),x.current.className=l};return r(Y,{containerClass:"w-full",extraHeader:!0,extraHeaderTitle:a("Browse ebook"),extraHeaderImage:B,extraHeaderText:"",extraImageHeight:"h-14",children:[t(X,{title:`${w!==null?a(":categoryName ebook",{categoryName:w.category}):L}`}),t(ee,{show:A,onClose:e=>D(!1),children:y&&t(te,{audio:y,inModal:!0})}),r("div",{className:"flex w-full -mt-16",children:[t("form",{onSubmit:W,children:r("div",{ref:x,className:"hidden lg:block w-56 lg:flex-shrink-0 lg:mr-5",children:[t("h3",{className:"text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900 dark:text-white shadow rounded-t-lg",children:a("Search")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:t(ae,{className:"w-full",name:"search",value:v,handleChange:e=>$(e.target.value),placeholder:a("Search ebook")})}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900 dark:text-white shadow rounded-t-lg",children:a("Product Type")}),r("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:[r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",value:"toy",checked:o==="toy",className:"mr-2",onChange:e=>s(e.target.value)}),a("Toys")]}),r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",value:"Ebook",checked:o==="Ebook",className:"mr-2",onChange:e=>s(e.target.value)}),a("E-Books")]}),r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",checked:o==="audio_file",value:"audio_file",className:"mr-2",onChange:e=>s(e.target.value)}),a("ebook Files")]}),r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",checked:o==="text_file",value:"text_file",className:"mr-2",onChange:e=>s(e.target.value)}),a("Text Files")]}),r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",checked:o==="phone_sex",value:"phone_sex",className:"mr-2",onChange:e=>s(e.target.value)}),a("Phone Sex")]}),r("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",checked:o==="real_session",value:"real_session",className:"mr-2",onChange:e=>s(e.target.value)}),a("Real Sessions")]}),r("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",checked:o==="live_streaming",value:"live_streaming",className:"mr-2",onChange:e=>s(e.target.value)}),a("Live Streaming")]}),r("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",checked:o==="weared_clothes",value:"weared_clothes",className:"mr-2",onChange:e=>s(e.target.value)}),a("Weared Clothes")]}),r("div",{className:"flex items-center text-gray-600 dark:text-white",children:[t("input",{type:"radio",name:"sort",checked:o==="pictures",value:"pictures",className:"mr-2",onChange:e=>s(e.target.value)}),a("Pictures")]})]}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900 dark:text-white shadow rounded-t-lg",children:a("Sort By")}),r("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:[r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",value:"Most",checked:o==="Most",className:"mr-2",onChange:e=>s(e.target.value)}),a("Most Viewed")]}),r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",value:"Recently",checked:o==="Recently",className:"mr-2",onChange:e=>s(e.target.value)}),a("Newest Uploaded")]}),r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",checked:o==="Older",value:"Older",className:"mr-2",onChange:e=>s(e.target.value)}),a("Older ebook")]}),r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",checked:o==="Highest",value:"Highest",className:"mr-2",onChange:e=>s(e.target.value)}),a("Highest Price")]}),r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",checked:o==="Lowest",value:"Lowest",className:"mr-2",onChange:e=>s(e.target.value)}),a("Lowest Price")]})]}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900  dark:text-white shadow rounded-t-lg",children:a("Category")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3 overflow-y-auto h-48",children:I.map(e=>r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"checkbox",name:"categories[]",className:"mr-2",value:e.id,onChange:G,checked:C.includes(e.id.toString())}),e.category]},`catFilter-${e.id}`))}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900  dark:text-white shadow rounded-t-lg",children:a("Tags")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3 overflow-y-auto h-48",children:E.map(e=>{var l;return r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"checkbox",name:"tags[]",className:"mr-2",value:e.name,onChange:J,checked:F.includes((l=e==null?void 0:e.name)==null?void 0:l.toString())}),e.name]},`tagFilter-${e.id}`)})}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900  dark:text-white shadow rounded-t-lg",children:a("Models")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3 overflow-y-auto h-48",children:R.map(e=>r("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"checkbox",name:"models[]",className:"mr-2",value:e.id,onChange:K,checked:z.includes(e.id.toString())}),e.name]},`modelFilter-${e.id}`))}),j?t("div",{className:"my-3",children:t(q,{})}):t("button",{className:"mt-5 bg-indigo-500 dark:bg-zinc-800 font-semibold text-white rounded-lg px-2 py-1.5 block w-full",children:a("Apply Filters")}),t(H,{className:"mt-2",onClick:e=>u.Inertia.visit(route("ebook.browse")),children:a("Reset")}),t("div",{className:"lg:hidden text-center border-t border-t-gray-300 dark:border-gray-900 py-5",children:t(H,{className:"",onClick:e=>M(e),children:a("Close")})})]})}),r("div",{className:"flex-grow",children:[r("button",{onClick:e=>Q(e),className:"mb-7 px-3 -mt-1 py-1.5 bg-indigo-500 text-white rounded-lg lg:hidden flex items-center justify-end",children:[t(le,{className:"mr-1"}),a("Show Filters")]}),d.total===0&&r("div",{className:"text-xl bg-white rounded-lg shadow text-gray-600 dark:bg-zinc-900 dark:text-white font-light p-3 flex items-center",children:[t(Z,{className:"w-12 h-12 mr-2"}),a("No ebook to show")]}),d.current_page==1&&k.total>0&&r("div",{children:[t("h2",{className:"text-indigo-700 text-2xl font-bold dark:text-white",children:a("Random ebook")}),t(b,{audio:k.data,blocks:p}),t("h2",{className:"text-indigo-700 text-2xl font-bold dark:text-white",children:a("Filtered ebook")})]}),t(b,{audio:d.data,blocks:p}),f.data.length>0&&r(T,{children:[t("h2",{className:"text-indigo-700 text-2xl font-bold dark:text-white",children:a("Recommended ebook")}),t(b,{audio:f.data,blocks:p})]}),d.last_page>1&&r(T,{children:[t("div",{className:"flex text-gray-600 mt-10 mb-5 text-sm",children:a("Page: :pageNumber of :lastPage",{pageNumber:d.current_page,lastPage:d.last_page})}),t(oe,{total:d.last_page*10,defaultCurrent:d.current_page,onChange:V,showSizeChanger:!1})]})]})]})]})}export{Le as default};
