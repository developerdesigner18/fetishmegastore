import{I as c}from"./InputLabel.073d914c.js";import{I as f}from"./InputError.81cc3e9d.js";import{T as _}from"./TextInput.dc5362aa.js";import{T as ee}from"./Textarea.e478d660.js";import{P as se}from"./PrimaryButton.e11d2297.js";import{_ as n}from"./Translate.dc83ae5b.js";import{Q as N}from"./react-toastify.esm.b3971d4c.js";import{A as xe}from"./AuthenticatedLayout.7a8757e7.js";import{i as Se,r as p,d as De,j as l,a as e,H as Te,h as Ae}from"./app.8657e2b6.js";import{c as ze}from"./index.02c900e1.js";import Me from"./AccountNavi.ecd0b9fc.js";import{S as C}from"./sweetalert2.esm.all.08ba7c87.js";import{C as A}from"./Checkbox.254b43e6.js";import{S as x}from"./Front.2606f237.js";import{S as Pe}from"./index.dabbdbf9.js";import"./index.0271a3d0.js";import"./iconBase.efb5a903.js";import"./index.a74bf29a.js";import"./react-cookie-consent.esm.46adfee2.js";import"./transition.6485defc.js";import"./Modal.10f8a02a.js";import"./index.e7e076b2.js";import"./index.esm.e30f3812.js";function ns({audio:t,ogValue:a,categories:te,models:ae,tags:z,fileNames:le,supportedLocales:k,selectedCategoryIds:re,selectedModelIds:ne,selectedTagNames:ie}){var U,E,I,q,R,$,B,H,Y,G,K,J,Q,W,X,Z;const{data:r,setData:g,post:S,processing:M,errors:d,progress:je}=Se({title_en:((U=a==null?void 0:a.title)==null?void 0:U.en)||"",title_lang:(a==null?void 0:a.title_lang)||"",title_lang_val:((E=a==null?void 0:a.title)==null?void 0:E[a==null?void 0:a.title_lang])||"",description_en:((I=a==null?void 0:a.description)==null?void 0:I.en)||"",description_lang:(a==null?void 0:a.description_lang)||"",description_lang_val:((q=a==null?void 0:a.description)==null?void 0:q[a==null?void 0:a.description_lang])||"",tag:z||"",category_id:t.category_id||"",model_id:t.model_id||"",price:t.price||"",free_for_subs:t.free_for_subs||!1,is_from_ftp:t.is_from_ftp||!1,thumbnail:"",audio_file:"",is_terms:typeof t.is_terms=="boolean"?t.is_terms:!1,is_agreement:typeof t.is_agreement=="boolean"?t.is_agreement:!1,is_rules:typeof t.is_rules=="boolean"?t.is_rules:!1,seo:{h2:(R=t.seoDeatils)==null?void 0:R.h2,keyword:($=t.seoDeatils)==null?void 0:$.keyword,meta_keyword:(B=t.seoDeatils)==null?void 0:B.meta_keyword,desc:(H=t.seoDeatils)==null?void 0:H.desc,og_title:(Y=t.seoDeatils)==null?void 0:Y.og_title,og_desc:(G=t.seoDeatils)==null?void 0:G.og_desc,meta_robot:(K=t.seoDeatils)==null?void 0:K.meta_robot,cust_url:(J=t.seoDeatils)==null?void 0:J.cust_url,og_image_url:(Q=t.seoDeatils)==null?void 0:Q.og_image_url,json_id:(W=t.seoDeatils)==null?void 0:W.json_id}}),[u,P]=p.exports.useState(null),[b,w]=p.exports.useState([]),[Fe,y]=p.exports.useState(!1),[oe,D]=p.exports.useState(0),[v,j]=p.exports.useState(t.is_from_ftp===1),[Le,ce]=p.exports.useState(t.category_id||""),[Oe,de]=p.exports.useState(t.model_id||""),[me,F]=p.exports.useState(re||[]),[_e,L]=p.exports.useState(ne||[]),[he,fe]=p.exports.useState(ie||[]),pe=()=>{j(!v),r.is_from_ftp=v!==!0};p.exports.useEffect(()=>{var s,i,o,h;t&&(g({title_en:((s=a==null?void 0:a.title)==null?void 0:s.en)||"",title_lang:(a==null?void 0:a.title_lang)||"",title_lang_val:((i=a==null?void 0:a.title)==null?void 0:i[a==null?void 0:a.title_lang])||"",description_en:((o=a==null?void 0:a.description)==null?void 0:o.en)||"",description_lang:(a==null?void 0:a.description_lang)||"",description_lang_val:((h=a==null?void 0:a.description)==null?void 0:h[a==null?void 0:a.description_lang])||"",tag:t.tags&&typeof t.tags=="string"&&t.tags?t.tags.split(","):[],price:t.price||"",free_for_subs:t.free_for_subs||!1,thumbnail:"",audio_file:t.audio_file||"",is_terms:typeof t.is_terms=="boolean"?t.is_terms:!1,is_agreement:typeof t.is_agreement=="boolean"?t.is_agreement:!1,is_rules:typeof t.is_rules=="boolean"?t.is_rules:!1,seo:t.seo||{}}),j(t.is_from_ftp===1),ce(t.category_id),de(t.model_id),F(t.category_id||[]),L(t.model_id||[]))},[t]);const ge=s=>{const i=s.target.value,o=t.title||{};g(h=>({...h,title_lang:i,title_lang_val:o[i]||""}))},ue=s=>{const i=s.target.value,o=t.description||{};g(h=>({...h,description_lang:i,description_lang_val:o[i]||""}))},ve=s=>{console.log(`selected ${s}`),P(s),r.audio_file="audio/"+s,r.is_from_ftp=v},be=s=>{fe(s),g("tag",s)},ke=s=>{F(s),g("category_id",s)},Ne=s=>{L(s),g("model_id",s)},m=s=>{const{name:i,type:o,checked:h,value:V}=s.target;i.startsWith("seo.")?g("seo",{...r.seo,[i.split(".")[1]]:o==="checkbox"?h:V}):g(i,o==="checkbox"?h:V)};p.exports.useEffect(()=>{Object.keys(d).length&&Object.keys(d).forEach(s=>{N.error(d[s])})},[d]),p.exports.useEffect(()=>{b.length>0&&ye()},[b]);const we=()=>{w([]);let s=1024*1024*8,i=Math.ceil(u.size/s);for(let o=0;o<i;o++)w(h=>[...h,u.slice(o*s,Math.min(o*s+s,u.size),u.type)])},ye=()=>{y(!0);const s=new FormData;s.append("media_type","audio"),s.append("is_last",b.length===1),s.append("audio",t.id||0),s.set("file",b[0],`${u.name}.part`),De.post(route("audio.uploadChunks"),s,{onUploadProgress:i=>{D(oe+i.loaded)}}).then(function(i){b.length<=1&&(w([]),D(0),r.audio_file=i.data.result,t.id===null?O():T());let o=[...b];o.splice(0,1),w(o)}).catch(function(i){var o,h;D(0),N.error((h=(o=i.response)==null?void 0:o.data)==null?void 0:h.message)}).then(function(){y(!1)})},O=()=>{C.fire({title:"Are you sure?",text:"Do you want to save this audio?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, save it!",cancelButtonText:"No, cancel"}).then(s=>{s.isConfirmed?(S(route("audio.saveAudio")),C.fire("Saved!","Your audio has been saved.","success")):s.dismiss===C.DismissReason.cancel&&C.fire("Cancelled","Your audio has not been saved","error")})},T=()=>{S(route("audio.update",{audio:t.id}))},Ce=s=>{if(s.preventDefault(),!r.is_terms){N.error(n("Please agree to terms and conditions"));return}if(!r.is_agreement){N.error(n("Please agree to the agreement"));return}if(!r.is_rules){N.error(n("Please agree to the rules"));return}u?v?(y(!0),t.id===null?O():T(),y(!1)):we():u===""&&t.id!==null&&(v?S(route("audio.update",{audio:t.id})):T())};return console.log(r,"data"),l(xe,{children:[e(Te,{title:n("Upload audio")}),l("div",{className:"lg:flex lg:space-x-10",children:[e(Me,{active:"upload-audio"}),l("div",{className:"p-4 sm:p-8 bg-white w-full dark:bg-zinc-900 shadow sm:rounded-lg",children:[l("header",{className:"mb-5",children:[l("h2",{className:"text-lg inline-flex items-center md:text-xl font-medium text-gray-600 dark:text-gray-100",children:[e(ze,{className:"mr-2"}),t.id===null?n("Upload audio"):n("Edit audio")]}),e("p",{className:"mt-1 mb-2 text-sm text-gray-600 dark:text-gray-400",children:n("Upload a new audio")}),e(se,{onClick:s=>Ae.Inertia.visit(route("audio.list")),children:n("<< Back to audio")})]}),e("hr",{className:"my-5"}),l("form",{onSubmit:Ce,encType:"multipart/form-data",children:[l("div",{className:"mb-5",children:[e(c,{for:"title_en",value:n("Title")}),e(_,{name:"title_en",value:r.title_en||t.title_en||t.title||"",handleChange:s=>g("title_en",s.target.value),required:!0,className:"mt-1 block w-full md:w-1/2"}),e(f,{message:d.title_en,className:"mt-2"})]}),l("div",{className:"mb-5",children:[e(c,{htmlFor:"title_lang",value:n("Select Title Language")}),l("select",{name:"title_lang",value:r.title_lang,onChange:ge,className:"mt-1 block w-full md:w-1/2 border-zinc-300 dark:border-zinc-700 dark:bg-zinc-800 dark:text-gray-300 rounded-md shadow-sm",children:[e("option",{value:"",children:n("--Select--")}),k&&k.map(s=>e("option",{value:s.lang_value,children:s.lang_name},`title-locale-${s.lang_value}`))]})]}),l("div",{className:"mb-5",children:[e(c,{htmlFor:"title_lang_val",value:`${((X=k.find(s=>s.lang_value===r.title_lang))==null?void 0:X.lang_name)||"Translated"} Title`}),e(_,{name:"title_lang_val",value:r.title_lang_val,handleChange:m,className:"mt-1 block w-full md:w-1/2"}),e(f,{message:d.title_lang_val,className:"mt-2"})]}),l("div",{className:"mb-5",children:[e(c,{for:"category",value:n("Category")}),e(x,{mode:"multiple",allowClear:!0,showSearch:!0,style:{width:"50%"},placeholder:"Please select",value:me,onChange:ke,options:te,filterOption:(s,i)=>{var o;return((o=i==null?void 0:i.label)!=null?o:"").toLowerCase().includes(s.toLowerCase())}}),e(f,{message:d.category_id,className:"mt-2"})]}),l("div",{className:"mb-5",children:[e(c,{for:"model",value:n("Model")}),e(x,{mode:"multiple",allowClear:!0,showSearch:!0,style:{width:"50%"},placeholder:"Please select",value:_e,onChange:Ne,options:ae,filterOption:(s,i)=>{var o;return((o=i==null?void 0:i.label)!=null?o:"").toLowerCase().includes(s.toLowerCase())}}),e(f,{message:d.model_id,className:"mt-2"})]}),l("div",{className:"mb-5",children:[e(c,{for:"tag",value:n("Tags")}),e(x,{mode:"multiple",allowClear:!0,showSearch:!0,style:{width:"50%"},placeholder:"Please select",value:he,onChange:be,options:z,filterOption:(s,i)=>{var o;return((o=i==null?void 0:i.label)!=null?o:"").toLowerCase().includes(s.toLowerCase())}}),e(f,{message:d.tag,className:"mt-2"})]}),l("div",{className:"flex w-full md:w-1/2 flex-col md:flex-row md:items-center md:space-x-10 md:justify-between",children:[l("div",{className:"mb-5",children:[e(c,{for:"price",value:n("Price")}),l("div",{className:"flex items-center",children:[e(_,{type:"number",name:"price",value:r.price,handleChange:m,required:!0,className:"mt-1 w-32"}),e("div",{className:"ml-1 dark:text-white text-gray-700",children:n("tokens")})]}),e(f,{message:d.price,className:"mt-2"})]}),l("div",{className:"mb-5",children:[e(c,{for:"free_for_subs",value:n("Free for subscribers?")}),l("select",{name:"free_for_subs",value:r.free_for_subs,onChange:m,required:!0,className:"mt-1 block w-32 border-zinc-300 dark:border-zinc-700 dark:bg-zinc-800 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",children:[e("option",{value:"yes",children:n("Yes")}),e("option",{value:"no",children:n("No")})]}),e(f,{message:d.free_for_subs,className:"mt-2"})]})]}),l("div",{className:"mb-5",children:[e(c,{for:"thumbnail",value:n("Thumbnail")}),e(_,{className:"p-1 block w-full md:w-1/2 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-300 focus:outline-none dark:bg-zinc-800 dark:border-gray-600 dark:placeholder-zinc-900",type:"file",name:"thumbnail",handleChange:s=>g("thumbnail",s.target.files[0]),required:t.id===null}),e(f,{message:d.thumbnail,className:"mt-2"})]}),e("div",{className:"mb-5",children:l("label",{children:[e(Pe,{onChange:pe,checked:r.is_from_ftp}),"Select audio from FTP?"]})}),!v&&l("div",{className:"mb-5",children:[e(c,{for:"audio",value:n("Audio")}),e(_,{className:"p-1 block w-full md:w-1/2 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-300 focus:outline-none dark:bg-zinc-800 dark:border-gray-600 dark:placeholder-zinc-900",type:"file",name:"audio_file",accept:"audio/mp3,audio/mpeg,audio/ogg",handleChange:s=>P(s.target.files[0]),required:t.id===null}),e(f,{message:d.audio_file,className:"mt-2"})]}),v&&e("div",{className:"mt-2",children:e(x,{style:{width:"50%"},placeholder:"Please select",value:t.audio_file,onChange:ve,options:le})}),l("div",{className:"mb-5",children:[e(c,{for:"description_en",value:n("Description (English)")}),e(ee,{name:"description_en",value:r.description_en||"",handleChange:s=>g("description_en",s.target.value),required:!0,className:"mt-1 block w-full md:w-1/2"}),e(f,{message:d.description_en,className:"mt-2"})]}),l("div",{className:"mb-5",children:[e(c,{htmlFor:"description_lang",value:n("Select Description Language")}),l("select",{name:"description_lang",value:r.description_lang,onChange:ue,className:"mt-1 block w-full md:w-1/2",children:[e("option",{value:"",children:n("--Select--")}),k.map(s=>e("option",{value:s.lang_value,children:s.lang_name},s.lang_value))]})]}),l("div",{className:"mb-5",children:[e(c,{htmlFor:"description_lang_val",value:`${(Z=k.find(s=>s.lang_value===r.description_lang))==null?void 0:Z.lang_name} ${n("Description")}`}),e(ee,{name:"description_lang_val",value:r.description_lang_val,handleChange:m,className:"mt-1 block w-full md:w-1/2"})]}),e("hr",{className:"mt-3"}),e("label",{children:"SEO"}),l("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l("div",{children:[e(c,{for:"seo_h2",value:"H2"}),e(_,{name:"seo.h2",value:r.seo.h2,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_keyword",value:"Keyword"}),e(_,{name:"seo.keyword",value:r.seo.keyword,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_meta_keyword",value:"Meta Keyword"}),e(_,{name:"seo.meta_keyword",value:r.seo.meta_keyword,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_desc",value:"Meta Description"}),e(_,{name:"seo.desc",value:r.seo.desc,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_og_title",value:"OG Title"}),e(_,{name:"seo.og_title",value:r.seo.og_title,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_og_desc",value:"OG Description"}),e(_,{name:"seo.og_desc",value:r.seo.og_desc,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_meta_robot",value:"Meta Robot"}),e(_,{name:"seo.meta_robot",value:r.seo.meta_robot,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_cust_url",value:"Custom URL"}),e(_,{name:"seo.cust_url",value:r.seo.cust_url,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_og_image_url",value:"OG Image URL"}),e(_,{name:"seo.og_image_url",value:r.seo.og_image_url,handleChange:m,className:"mt-1 block w-full"})]}),l("div",{children:[e(c,{for:"seo_json_id",value:"JSON ID"}),e(_,{name:"seo.json_id",value:r.seo.json_id,handleChange:m,className:"mt-1 block w-full"})]})]}),l("div",{className:"mt-4",children:[e(A,{name:"is_terms",checked:r.is_terms,handleChange:m}),l("span",{className:"mx-2",children:[n(" Agree to "),e("a",{href:"policy/Terms.pdf",className:"underline",target:"_blank",children:n("Terms and Conditions")})]}),e(f,{message:d.is_terms,className:"mt-2"})]}),l("div",{className:"mt-4",children:[e(A,{name:"is_agreement",checked:r.is_agreement,handleChange:m}),l("span",{className:"mx-2",children:[n(" Agree to "),e("a",{href:"policy/Streamer-Agreement.pdf",className:"underline",target:"_blank",children:n("Agreement")})]}),e(f,{message:d.is_agreement,className:"mt-2"})]}),l("div",{className:"mt-4",children:[e(A,{name:"is_rules",checked:r.is_rules,handleChange:m}),l("span",{className:"mx-2",children:[n(" Agree to "),e("a",{href:"policy/Content-Rules.pdf",className:"underline",target:"_blank",children:n("Rules")})]}),e(f,{message:d.is_rules,className:"mt-2"})]}),e("div",{className:"mt-5",children:e(se,{type:"submit",processing:M,disabled:M,children:t.id===null?n("Upload"):n("Save Changes")})})]})]})]})]})}export{ns as default};
