import{r as s,j as o,a as t,H as U,h as y}from"./app.64d592ef.js";import{_ as r}from"./Translate.dc83ae5b.js";import{S as F}from"./SecondaryButton.23e9a09b.js";import{a as E}from"./index.2c07426a.js";import{C as P,S as u}from"./CategoryLoop.8e63e53e.js";import{S as R}from"./Spinner.507e754f.js";import{F as B}from"./Front.fbff2f23.js";import{T as $}from"./TextInput.618a5da3.js";import{I as A}from"./index.ad0cf7d8.js";import"./index.6e860bb5.js";import"./iconBase.9b35345f.js";import"./index.aca621cc.js";import"./index.6369b7cd.js";import"./react-cookie-consent.esm.c9f68579.js";import"./transition.cfd51e90.js";import"./Modal.81054d6f.js";import"./react-toastify.esm.06aebf17.js";import"./index.e7e076b2.js";import"./index.esm.7bfaeba6.js";function ne({channels:l,exploreImage:_,categories:z,userrequest:p}){console.log(l,"Categories"),console.log(p,"userrequest");const x=s.exports.useRef(!0),n=s.exports.useRef(!1),[f,b]=s.exports.useState(l.data),[c,w]=s.exports.useState(l.next_page_url),[d,g]=s.exports.useState(!1),m=s.exports.useRef(),[k,I]=s.exports.useState(""),[D,v]=s.exports.useState(!1),[C,N]=s.exports.useState(p.selectedCategories);s.exports.useEffect(()=>{if(n.current){n.current=!1;return}if(x.current){x.current=!1;return}b(l.data),w(l.next_page_url)},[l]);const H=()=>{!c||d||(g(!0),n.current=!0,y.Inertia.get(c,{},{preserveState:!0,preserveScroll:!0,only:["channels"],onSuccess:e=>{const a=e.props.channels.data,h=e.props.channels.next_page_url;b(i=>[...i,...a]),w(h),g(!1)},onError:()=>{g(!1),n.current=!1}}))},M=e=>{e.preventDefault(),y.Inertia.visit(route("categories.browse",{search:k,selectedCategories:C}),{preserveState:!0,onBefore:()=>v(!0),onFinish:()=>v(!1)}),S()},L=e=>{e.preventDefault();const a="fixed inset-0 z-[9999] pt-5 px-2 overflow-scroll h-screen bg-white dark:bg-black  block w-2/3 flex-shrink-0 mr-5";m.current.className=a},S=e=>{e==null||e.preventDefault();const a="hidden lg:block w-56 lg:flex-shrink-0 lg:mr-5";console.log(`hiding filters ${a}`),m.current.className=a},j=e=>{const{value:a,checked:h}=e.target;N(h?i=>[...i,a]:i=>i.filter(T=>T!==a))};return o(B,{containerClass:"w-full",extraHeader:!0,extraHeaderTitle:r("Discover Categories"),extraHeaderImage:_,extraHeaderText:"",extraImageHeight:"h-14",children:[t(U,{title:r("Discover Categories")}),o("div",{className:"flex w-full -mt-16",children:[t("form",{onSubmit:M,children:o("div",{ref:m,className:"hidden lg:block w-56 lg:flex-shrink-0 lg:mr-5",children:[t("h3",{className:"text-indigo-700 dark:text-white text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900 shadow rounded-t-lg",children:r("Search")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:t($,{className:"w-full",name:"search",value:k,handleChange:e=>I(e.target.value),placeholder:r("Search Category")})}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900  dark:text-white shadow rounded-t-lg",children:r("Category")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3 overflow-y-auto h-48",children:z.map(e=>o("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"checkbox",name:"categories[]",className:"mr-2",value:e.id,onChange:j,checked:C.includes(e.id.toString())}),e.category]},`catFilter-${e.id}`))}),D?t("div",{className:"my-3",children:t(R,{})}):t("button",{className:"mt-5 bg-indigo-500 dark:bg-zinc-800 font-semibold text-white rounded-lg px-2 py-1.5 block w-full",children:r("Apply Filters")}),t("div",{className:"lg:hidden text-center border-t dark:border-zinc-800 border-t-gray-300 py-5",children:t(F,{className:"",onClick:e=>S(e),children:r("Close")})})]})}),o("div",{className:"flex-grow",children:[o("button",{onClick:e=>L(e),className:"mb-7 px-3 -mt-1 py-1.5 bg-indigo-500 text-white rounded-lg lg:hidden flex items-center justify-end",children:[t(A,{className:"mr-1"}),r("Show Filters")]}),l.total===0&&o("div",{className:"text-xl bg-white dark:bg-zinc-900 rounded-lg shadow text-gray-600 dark:text-white font-light p-3 flex items-center",children:[t(E,{className:"w-12 h-12 mr-2"}),r("No Category to show")]}),t(P,{channels:f}),d&&o("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5 mt-5",children:[t(u,{}),t(u,{}),t(u,{})]}),o("div",{className:"text-center mt-10 mb-5",children:[c&&!d&&t(F,{onClick:H,children:r("Load More Categories")}),!c&&f.length>0&&t("p",{className:"text-gray-500 mt-4",children:r("You've reached the end!")})]})]})]})]})}export{ne as default};
