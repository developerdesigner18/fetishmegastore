import{_ as s}from"./Translate.dc83ae5b.js";import{u as P,r as N,j as t,a as e,H as F,F as k,L as n,h as _,d as j}from"./app.64d592ef.js";import{A as T}from"./AuthenticatedLayout.fa68427b.js";import{F as z}from"./index.37559ed6.js";import{e as G}from"./index.aca621cc.js";import{G as H}from"./index.9f935d96.js";import{S}from"./SecondaryButton.23e9a09b.js";import L from"./AccountNavi.c0aead7d.js";import{Q as x}from"./react-toastify.esm.06aebf17.js";import"./Front.fbff2f23.js";import"./iconBase.9b35345f.js";import"./index.6e860bb5.js";import"./index.6369b7cd.js";import"./react-cookie-consent.esm.c9f68579.js";import"./transition.cfd51e90.js";import"./Modal.81054d6f.js";import"./TextInput.618a5da3.js";import"./index.e7e076b2.js";import"./index.esm.7bfaeba6.js";function re({subs:a}){const{auth:u}=P().props,[d,p]=N.exports.useState(!1),[h,w]=N.exports.useState(a.data),C=r=>{confirm("Are you sure you want to cancel the subscription?")&&(p(!0),j.post(route("cancel-subscription",{id:r})).then(c=>{const{status:l,message:o}=c.data;p(!1),l===0?x.error(o):(x.success("Subscription cancelled successfully!"),w(m=>m.map(i=>i.id===r?{...i,status:"Canceled"}:i)))}).catch(c=>{p(!1),x.error("An error occurred while canceling the subscription.")}))},M="text-xl font-bold mr-2 md:mr-4 text-indigo-800 dark:text-indigo-500 border-b-2 border-indigo-800",A="text-xl font-bold mr-2 md:mr-4 hover:text-indigo-800 dark:text-white dark:hover:text-indigo-500";return t(T,{children:[e(F,{title:s("My Subscriptions")}),t("div",{className:"lg:flex lg:space-x-10",children:[e(L,{active:"my-subscriptions"}),t("div",{className:"ml-0 w-full",children:[u.user.is_streamer==="yes"&&t(k,{children:[e(n,{href:route("mySubscribers",{user:u.user.username}),className:A,children:s("My Subscribers")}),e(n,{href:route("mySubscriptions"),className:M,children:s("My Subscriptions")})]}),t("div",{className:"mt-5 p-4 sm:p-8 bg-white dark:bg-zinc-900 shadow sm:rounded-lg",children:[e("header",{children:t("div",{className:"flex items-start space-x-3",children:[e("div",{children:e(G,{className:"w-8 text-gray-600 h-8 dark:text-white"})}),t("div",{children:[t("h2",{className:"text-lg md:text-xl font-medium text-gray-600 dark:text-gray-100",children:[s("My Subscriptions")," (",a.total,")"]}),e("p",{className:"mt-1 mb-2 text-sm text-gray-600 dark:text-gray-400",children:s("These are the channels you are subscribed to")})]})]})}),e("hr",{className:"my-5"}),a.total===0&&t("div",{className:"text-xl dark:text-white text-gray-700 flex items-center space-x-4",children:[e(z,{className:"w-10 h-10"}),e("div",{children:s("You haven't subscribed to any channel.")})]}),e("div",{className:"flex flex-col md:flex-row flex-wrap items-center",children:h==null?void 0:h.map((r,c)=>{var l,o,m,i,g,f,b,y,v;return t("div",{className:"flex items-center space-x-2  mr-5 mb-5",children:[e("div",{children:e(n,{href:route("channel",{user:(o=(l=r.streamer)==null?void 0:l.username)!=null?o:"not-found"}),children:e("img",{src:(m=r.streamer)==null?void 0:m.profile_picture,alt:"",className:"rounded-full h-14 border-zinc-200 dark:border-indigo-200 border"})})}),t("div",{children:[e(n,{className:"block text-gray-600 dark:text-gray-300 text-lg font-semibold mt-1",href:route("channel",{user:(g=(i=r.streamer)==null?void 0:i.username)!=null?g:"not-found"}),children:(f=r.streamer)==null?void 0:f.name}),t(n,{className:"block text-sky-500 hover:text-sky-700 font-semibold text-sm",href:route("channel",{user:(y=(b=r.streamer)==null?void 0:b.username)!=null?y:"not-found"}),children:["@",(v=r.streamer)==null?void 0:v.username]}),t("span",{className:"mt-1 inline-flex items-center space-x-2 rounded px-1.5 py-0.5 bg-gray-500 text-gray-100 text-xs",children:[e(H,{className:"dark:text-white mr-1"}),r.expires_human]}),e("div",{className:"mt-2",children:r.status==="Active"?e("button",{className:`py-1 px-3 text-xs font-semibold bg-red-500 text-white rounded-md hover:bg-red-600 ${d?"opacity-50 cursor-not-allowed":""}`,onClick:()=>C(r.id),disabled:d,children:d?"Cancelling...":"Cancel Subscription"}):e("span",{className:"text-gray-500 text-xs font-semibold",children:r.status})})]})]},c)})}),a.last_page>1&&t(k,{children:[e("hr",{className:"my-5"}),e("div",{className:"flex text-gray-600 dark:text-gray-100 my-3 text-sm",children:s("Page: :pageNumber of :lastPage",{pageNumber:a.current_page,lastPage:a.last_page})}),e(S,{processing:!a.prev_page_url,className:"mr-3",onClick:()=>_.Inertia.visit(a.prev_page_url),children:s("Previous")}),e(S,{processing:!a.next_page_url,onClick:()=>_.Inertia.visit(a.next_page_url),children:s("Next")})]})]})]})]})]})}export{re as default};
