import{_ as r}from"./Translate.dc83ae5b.js";import{P as j}from"./PrimaryButton.dc200cb7.js";import{S as h}from"./SecondaryButton.23e9a09b.js";import{D as E}from"./DangerButton.e37a369d.js";import{r as d,u as M,j as a,a as t,H as T,L as c,h as p,F as I}from"./app.64d592ef.js";import{A as U}from"./AuthenticatedLayout.fa68427b.js";import{a as B}from"./index.6cfa1c68.js";import{R as D}from"./index.d9a8cbab.js";import{M as L}from"./react-tooltip.min.a2f274fb.js";/* empty css                          */import{M as A}from"./Modal.81054d6f.js";import{a as F}from"./index.6369b7cd.js";import $ from"./AccountNavi.c0aead7d.js";import{f as z,g as H}from"./index.aca621cc.js";import{P as O}from"./index.83b8a9e0.js";/* empty css             */import"./Front.fbff2f23.js";import"./iconBase.9b35345f.js";import"./index.6e860bb5.js";import"./react-cookie-consent.esm.c9f68579.js";import"./transition.cfd51e90.js";import"./react-toastify.esm.06aebf17.js";import"./TextInput.618a5da3.js";import"./index.e7e076b2.js";import"./index.esm.7bfaeba6.js";import"./index.517f43d0.js";function xe({videos:l}){var g;console.log(l,"videos");const[y,u]=d.exports.useState(!1),[N,b]=d.exports.useState(0),[i,f]=d.exports.useState(null),[x,w]=d.exports.useState(((g=M().props.ziggy.query)==null?void 0:g.search)||""),k=e=>{const s=e.target.value;w(s);const n=setTimeout(()=>{p.Inertia.get(route("videos.list"),{search:s},{preserveState:!0,replace:!0,only:["videos"]})},500);return()=>clearTimeout(n)},v=(e,s)=>{e.preventDefault(),u(!0),b(s)},_=()=>{p.Inertia.visit(route("videos.delete"),{method:"POST",data:{video:N},preserveState:!1})},o=d.exports.useRef({}),P=e=>{if(i!==e){if(i&&o.current[i]){const s=o.current[i];s&&typeof s.pause=="function"&&s.pause();const n=document.getElementById(`player-container-${i}`);n&&(n.innerHTML=""),delete o.current[i]}f(e)}},C=()=>{if(i&&o.current[i]){const e=o.current[i];e&&typeof e.pause=="function"&&e.pause();const s=document.getElementById(`player-container-${i}`);s&&(s.innerHTML=""),delete o.current[i]}f(null)};d.exports.useEffect(()=>()=>{Object.keys(o.current).forEach(e=>{const s=o.current[e];s&&typeof s.destroy=="function"&&s.destroy();const n=document.getElementById(`player-container-${e}`);n&&(n.innerHTML="")})},[]);const S=({video:e})=>{const s=d.exports.useRef(null);return d.exports.useEffect(()=>{if(i===e.id&&s.current){const n=s.current.plyr;return n&&(o.current[e.id]=n),()=>{o.current[e.id]&&delete o.current[e.id]}}},[i,e.id]),i!==e.id?a("div",{className:"relative cursor-pointer group",onClick:()=>P(e.id),children:[t("img",{src:e.thumbnail,alt:e.title,className:"w-full rounded-lg aspect-video object-cover",loading:"lazy"}),t("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200",children:t("div",{className:"w-16 h-16 bg-black bg-opacity-50 rounded-full flex items-center justify-center transform scale-90 group-hover:scale-100 transition-transform duration-200",children:t("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11v11.78a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):a("div",{className:"relative",id:`player-container-${e.id}`,children:[t(O,{ref:s,source:{type:"video",sources:[{src:e.videoUrl,type:"video/mp4"}],poster:e.thumbnail},options:{controls:["play-large","play","progress","current-time","mute","volume","fullscreen"],autoplay:!0}}),t("button",{onClick:C,className:"mt-2 text-sm text-red-500 hover:text-red-700",children:r("Close Player")})]})},V="text-xl font-bold mr-2 md:mr-4 text-indigo-800 dark:text-indigo-500 border-b-2 border-indigo-800",m="text-xl font-bold mr-2 md:mr-4 hover:text-indigo-800 dark:text-white dark:hover:text-indigo-500";return a(U,{children:[t(T,{title:r("Videos")}),t(A,{show:y,onClose:e=>u(!1),children:a("div",{className:"px-5 py-10 text-center",children:[t("h3",{className:"text-xl mb-3 text-zinc-700 dark:text-white",children:r("Are you sure you want to remove this Video?")}),t(E,{onClick:e=>_(),children:r("Yes")}),t(h,{className:"ml-3",onClick:e=>u(!1),children:r("No")})]})}),a("div",{className:"lg:flex lg:space-x-10",children:[t($,{active:"upload-videos"}),a("div",{className:"ml-0",children:[t(c,{href:route("videos.list"),className:V,children:r("Upload Videos")}),t(c,{href:route("audio.list"),className:m,children:r("Upload Audio")}),t(c,{href:route("ebook.list"),className:m,children:r("Upload Ebook")}),t(c,{href:route("textFile.list"),className:m,children:r("Upload TextFile")}),t(c,{href:route("videos.ordered"),className:m,children:r("Videos Ordered")}),t(c,{href:route("preview.list"),className:m,children:r("Upload Preview")}),t(c,{href:route("gallery.list"),className:m,children:r("Upload Gallery")}),t(c,{href:route("model.list"),className:m,children:r("Upload Model")}),a("div",{className:"mt-5 p-4 sm:p-8 bg-white dark:bg-zinc-900 shadow sm:rounded-lg",children:[a("header",{children:[a("h2",{className:"text-lg inline-flex items-center md:text-xl font-medium text-gray-600 dark:text-gray-100",children:[t(z,{className:"mr-2"}),r("My Videos")]}),t("p",{className:"mt-1 mb-2 text-sm text-gray-600 dark:text-gray-400",children:r("Upload & manage videos for the channel")}),a("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t(j,{onClick:e=>p.Inertia.visit(route("videos.upload")),children:r("Upload Video")}),a("div",{className:"relative w-full md:w-64",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:t(H,{className:"w-5 h-5 text-gray-400"})}),t("input",{type:"text",value:x,onChange:k,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500",placeholder:r("Search videos...")})]})]})]}),t("hr",{className:"my-5"}),l.total===0&&t("div",{className:"text-gray-600 dark:text-white",children:x?r("No videos found matching your search."):r("You didn't upload any videos yet.")}),l.total!==0&&t("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-x-5 gap-y-10",children:l.data.map(e=>a("div",{className:"w-full md:w-[340px] xl:w-[420px] mt-5",children:[t(S,{video:e}),a("div",{className:"my-3 h-6 overflow-hidden text-gray-600 text-sm font-semibold dark:text-white",children:[t("a",{"data-tooltip-content":e.title,"data-tooltip-id":`tooltip-${e.id}`,children:e.title}),t(L,{anchorSelect:"a"})]}),a("div",{className:"dark:text-white text-gray-600 flex items-center space-x-2 text-xs",children:[t(F,{className:"mr-1"})," ",e.categoryNames]}),a("div",{className:"mt-3 flex items-center space-x-2 text-sm justify-between",children:[a("span",{className:"text-gray-600 dark:text-white",children:[r("Price")," "]}),t("span",{className:"px-2 py-1 text-sm rounded-lg bg-sky-500 text-white",children:e.price>0?r(":tokensPrice tokens",{tokensPrice:e.price}):r("Free")})]}),a("div",{className:"mt-2 flex items-center space-x-2 text-sm justify-between",children:[a("span",{className:"text-gray-600 dark:text-white",children:[r("Free for subs")," "]}),t("span",{className:"px-2 py-1 rounded-lg bg-teal-500 text-white",children:e.free_for_subs})]}),a("div",{className:"flex mt-2 items-center space-x-2 text-sm justify-between",children:[a("span",{className:"text-gray-600 dark:text-white",children:[r("Views")," "]}),t("span",{className:"px-2 py-1 rounded-lg bg-gray-500 text-white",children:e.views})]}),a("div",{className:"flex mt-2 items-center space-x-2 text-sm justify-between",children:[a("span",{className:"text-gray-600 dark:text-white",children:[r("Earnings")," "]}),t("span",{className:"px-2 py-1 rounded-lg bg-pink-500 text-white",children:e.sales_sum_price?r(":salesTokens tokens",{salesTokens:e.sales_sum_price}):"--"})]}),a("div",{className:"border-t pt-3 mt-3  flex items-center",children:[t(c,{href:route("videos.edit",{video:e.id}),children:t(B,{className:"w-6 h-6 mr-2 text-sky-600"})}),t("button",{onClick:s=>v(s,e.id),children:t(D,{className:"text-red-600 w-5 h-5"})})]})]},`video-${e.id}`))}),l.last_page>1&&a(I,{children:[t("hr",{className:"my-5"}),t("div",{className:"flex text-gray-600 my-3 text-sm",children:r("Page: :pageNumber of :lastPage",{pageNumber:l.current_page,lastPage:l.last_page})}),t(h,{processing:!l.prev_page_url,className:"mr-3",onClick:e=>p.Inertia.visit(l.prev_page_url),children:r("Previous")}),t(h,{processing:!l.next_page_url,onClick:e=>p.Inertia.visit(l.next_page_url),children:r("Next")})]})]})]})]})]})}export{xe as default};
