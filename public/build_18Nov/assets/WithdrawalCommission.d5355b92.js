import{_ as q}from"./Translate.dc83ae5b.js";import{u as O,r as s,j as a,F as _,a as e,H as R,h as $}from"./app.64d592ef.js";function V({withdrawal_commission:d,currency:m,withdrawal_history:E}){const{flash:c}=O().props,i=E||{data:[],links:[],meta:{}},[I,g]=s.exports.useState(!1),[p,B]=s.exports.useState(""),[r,F]=s.exports.useState(""),[h,N]=s.exports.useState(""),[b,w]=s.exports.useState(""),[o,k]=s.exports.useState(""),[y,x]=s.exports.useState(""),[S,n]=s.exports.useState(""),[C,f]=s.exports.useState(!1),[P,A]=s.exports.useState(""),[M,W]=s.exports.useState(!1),u=(d==null?void 0:d.total_commission)||0,v=(d==null?void 0:d.minimum_withdrawal_limit)||0,L=(d==null?void 0:d.has_pending_request)||!1,z=t=>{if(t.preventDefault(),!r){n("Please select a payment type.");return}if(p<v){n(`Amount should be at least ${v}`);return}if(p>u){n(`Amount cannot exceed ${u}`);return}if(r==="Paypal"&&!h){n("Please enter your PayPal email.");return}if(r==="Crypto"&&!b){n("Please enter your crypto wallet address.");return}if(r==="Wire"&&(!o||!y)){n("Please select and provide IBAN or SWIFT code.");return}n(""),f(!0);const l={amount:p,payment_type:r};r==="Paypal"?l.email=h:r==="Crypto"?l.wallet_address=b:r==="Wire"&&(l[o]=y),$.Inertia.post(route("withdrawal.request"),l,{onSuccess:()=>{f(!1),g(!1),A("Your withdrawal request has been sent successfully."),setTimeout(()=>A(""),3e3)},onError:()=>{f(!1)}})},D=()=>{if(L){W(!0),setTimeout(()=>W(!1),3e3);return}g(!0)};return a(_,{children:[e(R,{title:q("Withdrawal Commission")}),a("div",{className:"p-6 bg-white dark:bg-zinc-900 shadow rounded-lg",children:[e("h2",{className:"text-2xl font-bold mb-6 text-gray-800 dark:text-white",children:q("Withdrawal Commission")}),P&&e("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded",children:P}),c.success&&e("div",{className:"mb-4 p-3 bg-green-100 text-green-800 rounded",children:c.success}),c.error&&e("div",{className:"mb-4 p-3 bg-red-100 text-red-800 rounded",children:c.error}),M&&e("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:"You already have a pending withdrawal request. Please wait until it is processed."}),a("div",{className:"mb-6 flex items-center justify-between",children:[a("div",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Total Commission:"," ",a("span",{className:"text-indigo-700 dark:text-indigo-400",children:[m,u]})]}),e("button",{onClick:D,className:"px-5 py-3 border border-transparent rounded-lg font-bold text-xs uppercase tracking-widest transition ease-in-out duration-150 bg-indigo-800 text-white hover:bg-indigo-700 active:bg-indigo-900",children:"Add Request"})]}),e("div",{className:"overflow-x-auto mb-6",children:a("table",{className:"min-w-full text-sm text-left border border-gray-200 dark:border-gray-700 shadow-sm rounded-lg overflow-hidden",children:[e("thead",{className:"bg-indigo-600 text-white text-xs uppercase font-semibold tracking-wider",children:a("tr",{children:[e("th",{className:"px-4 py-3",children:"S.No"}),e("th",{className:"px-4 py-3",children:"Request Date"}),a("th",{className:"px-4 py-3",children:["Amount(",m,")"]}),e("th",{className:"px-4 py-3",children:"Approved Amount"}),e("th",{className:"px-4 py-3",children:"Status"}),e("th",{className:"px-4 py-3",children:"Approved By"}),e("th",{className:"px-4 py-3",children:"Approved At"})]})}),e("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900",children:i.data&&i.data.length>0?i.data.map((t,l)=>{var T,j;return a("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[e("td",{className:"px-4 py-3 font-medium text-gray-700 dark:text-gray-200",children:((j=(T=i.meta)==null?void 0:T.from)!=null?j:1)+l}),e("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-300",children:new Date(t.created_at).toLocaleString()}),e("td",{className:"px-4 py-3 font-semibold text-gray-800 dark:text-white",children:t.amount}),e("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-300",children:t.approved_amount||"-"}),e("td",{className:"px-4 py-3",children:e("span",{className:`px-2 py-1 text-xs rounded-full font-semibold ${t.status==="approved"?"bg-green-100 text-green-700":t.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),e("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-300",children:t.approve_by||"-"}),e("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-300",children:t.approved_at?new Date(t.approved_at).toLocaleString():"-"})]},t.id)}):e("tr",{children:e("td",{colSpan:"7",className:"text-center py-6 text-gray-500 dark:text-gray-300",children:"No withdrawal history found."})})})]})}),e("div",{className:"flex justify-center space-x-2 mt-4",children:i.links.map((t,l)=>e("button",{onClick:()=>{t.url&&$.Inertia.get(t.url)},disabled:!t.url,className:`px-3 py-2 border rounded ${t.active?"bg-indigo-800 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-white"} ${t.url?"hover:bg-indigo-100":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},l))}),C&&e("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"})}),I&&!C&&e("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:a("div",{className:"bg-white dark:bg-zinc-800 p-6 rounded-lg w-full max-w-md shadow-lg",children:[e("h3",{className:"text-xl font-bold mb-4",children:"Add Withdrawal Request"}),S&&e("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:S}),a("form",{onSubmit:z,children:[a("div",{className:"mb-4",children:[a("label",{className:"block mb-1 font-medium",children:["Total Commission (",m,")"]}),e("input",{type:"text",value:u,readOnly:!0,className:"w-full border-gray-300 rounded-lg px-3 py-2 bg-gray-100"})]}),a("div",{className:"mb-4",children:[e("label",{className:"block mb-1 font-medium",children:"Withdrawal Amount"}),e("input",{type:"text",value:p,onChange:t=>{const l=t.target.value;/^\d*\.?\d*$/.test(l)&&B(l)},className:"w-full border-gray-300 rounded-lg px-3 py-2",placeholder:`Minimum ${v}`})]}),a("div",{className:"mb-4",children:[e("label",{className:"block mb-1 font-medium",children:"Payment Type"}),a("select",{value:r,onChange:t=>{F(t.target.value),N(""),w(""),k(""),x("")},className:"w-full border-gray-300 rounded-lg px-3 py-2",children:[e("option",{value:"",children:"Select Payment Type"}),e("option",{value:"Paypal",children:"PayPal"}),e("option",{value:"Crypto",children:"Crypto"}),e("option",{value:"Wire",children:"Wire"})]})]}),r==="Paypal"&&a("div",{className:"mb-4",children:[e("label",{className:"block mb-1 font-medium",children:"PayPal Email"}),e("input",{type:"email",value:h,onChange:t=>N(t.target.value),className:"w-full border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter your PayPal email"})]}),r==="Crypto"&&a("div",{className:"mb-4",children:[e("label",{className:"block mb-1 font-medium",children:"Wallet Address"}),e("input",{type:"text",value:b,onChange:t=>w(t.target.value),className:"w-full border-gray-300 rounded-lg px-3 py-2",placeholder:"Enter your crypto wallet address"})]}),r==="Wire"&&a(_,{children:[a("div",{className:"mb-4",children:[e("label",{className:"block mb-1 font-medium",children:"Select Bank Option"}),a("select",{value:o,onChange:t=>{k(t.target.value),x("")},className:"w-full border-gray-300 rounded-lg px-3 py-2",children:[e("option",{value:"",children:"Select"}),e("option",{value:"iban_code",children:"IBAN Code"}),e("option",{value:"swift_code",children:"SWIFT Code"})]})]}),o&&a("div",{className:"mb-4",children:[e("label",{className:"block mb-1 font-medium",children:o.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}),e("input",{type:"text",value:y,onChange:t=>x(t.target.value),className:"w-full border-gray-300 rounded-lg px-3 py-2",placeholder:`Enter ${o.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}`})]})]}),a("div",{className:"flex justify-end space-x-4",children:[e("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 bg-gray-300 rounded-lg",children:"Cancel"}),e("button",{type:"submit",className:"px-5 py-3 border border-transparent rounded font-black text-xs uppercase tracking-widest transition ease-in-out duration-150 bg-indigo-800 text-white hover:bg-indigo-700 active:bg-indigo-900",children:"Submit"})]})]})]})})]})]})}export{V as default};
