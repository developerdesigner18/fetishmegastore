import{a as e,j as r,H as V,r as a,d as g,F as w,L as k,h as A,i as $}from"./app.ce2bc0e2.js";import{A as O}from"./AuthenticatedLayout.6c76f410.js";import Q from"./AudioLoop.efeaf959.js";import{_ as n}from"./Translate.dc83ae5b.js";import{a as J,b as K,c as W,d as X,g as D,e as Y}from"./index.f3d7e524.js";import{F as Z,a as ee}from"./index.9d5f5c28.js";import{S as j}from"./Spinner.85b600cb.js";import{P as I}from"./PrimaryButton.0269d743.js";import{Q as M}from"./react-toastify.esm.ce806bab.js";import{M as R,c as te}from"./index.58d9d0d7.js";import{j as re}from"./index.a947ced8.js";import{S as se}from"./SecondaryButton.b89b6d69.js";import"./react-cookie-consent.esm.d4545ed5.js";import{M as ae}from"./Modal.1099fe94.js";import ne from"./ShareLink.a2b33c04.js";import{I as ie}from"./InputLabel.6cbec6be.js";import"./TextInput.0e1ed875.js";import le from"./SubscribePopup.75f9caaf.js";import{I as oe}from"./InputError.f2e3760f.js";import{T as ce}from"./Textarea.31a73792.js";import{P as me}from"./index.127bc7cc.js";/* empty css             */import"./Front.91155685.js";import"./iconBase.7698d573.js";import"./index.b7ddb5c7.js";import"./index.e7e076b2.js";import"./index.esm.bb993f23.js";import"./react-tooltip.min.dabaae5c.js";/* empty css                          */import"./SingleAudio.da3570ae.js";import"./transition.0f9bd53b.js";import"./Loader.06d96c4a.js";import"./index.52f2ef1c.js";import"./index.0d4b17de.js";import"./index.517f43d0.js";const U=({audio:t,relatedaudio:m,url:o,inModal:d})=>{var F,C,L;console.log("audio:",t),a.exports.useState();const[i,h]=a.exports.useState(!1),[u,f]=a.exports.useState(!1);a.exports.useState(!1);const[v,c]=a.exports.useState(t.isUserFavorite),[N,l]=a.exports.useState(null),[p,b]=a.exports.useState(!1),[S,B]=a.exports.useState(""),E=async()=>{b(!0),l(null);try{console.log("Download request started...");const s=await g.post(route("audio.download"),{slug:t.slug});if(s.data.status===1){B("Download will start in sometime...please wait.");const x=s.data.link;console.log("Download URL:",x);const G=await(await fetch(x)).blob(),_=window.URL.createObjectURL(G),y=document.createElement("a");y.href=_,y.setAttribute("download",`${t.slug}.mp3`),document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(_)}else l(s.data.message)}catch(s){console.error("Download error:",s),l("An error occurred while downloading the audio.")}finally{b(!1)}},T=(s,x)=>{s.preventDefault(),h(x),f(!0)},z=()=>{c(!0),g.post(route("audio.addToFavorite",{id:t.id}))},P=()=>{c(!1),g.post(route("audio.removeFromFavorite",{id:t.id}))};a.exports.useRef(null);const q={type:"audio",autoplay:!1,sources:[{src:t.audio_file,type:"audio/mp3",size:720},{src:(F=t.videoUrl360p)!=null?F:t.audio_file,type:"audio/mp3",size:360}]};a.exports.useEffect(()=>{H()},[]);const H=()=>{g.post(route("audio.increaseAudioViews",{audio:t.id})).then(()=>{setViewIncreased(!0)}).catch(s=>{console.error("Error increasing views:",s)})};return r(w,{children:[e(ae,{show:u,onClose:s=>f(!1),children:i&&e(ne,{link:i,inModal:!0})}),r("div",{className:`justify-center w-full ${d?"p-3":"p-0"}`,children:[r("div",{className:"flex items-start",children:[e("div",{className:"mr-5 flex flex-col items-center flex-shrink-0",children:e(k,{href:route("channel",{user:t.streamer.username}),children:e("img",{src:t.streamer.profile_picture,className:"w-14 h-14 rounded-full"})})}),r("div",{children:[e("h3",{className:"text-lg md:text-2xl font-light dark:text-indigo-100 hover:text-indigo-800 text-indigo-600 dark:hover:text-indigo-400",children:t.title}),r("div",{className:"flex items-center flex-wrap md:space-x-2 mt-1",children:[r(k,{href:route("channel",{user:t.streamer.username}),className:"text-sm text-gray-600 mr-2  dark:text-white",children:["@",t.streamer.username]}),(C=t.selectedCategory)==null?void 0:C.map((s,x)=>r(k,{href:route("audio.browse",{videocategory:s.value,slug:`-${s.label}`}),className:"text-gray-600 mr-2  inline-flex items-center space-x-1 dark:text-zinc-100 text-sm",children:[e(J,{className:"w-3"}),e("span",{children:s.label})]})),e(K,{className:"w-3"}),e("span",{children:(L=t==null?void 0:t.tags)==null?void 0:L.map((s,x)=>r(k,{href:route("tag",{id:s.id}),className:"text-gray-600 mr-2  inline-flex items-center space-x-1 dark:text-zinc-100 text-sm",children:[" ",r("span",{children:[s.name," ",x!==t.tags.length-1&&", "]})]}))}),t.free_for_subs==="yes"&&t.price!==0&&r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:[e(re,{className:"w-4 h-4 mr-1"}),n("Free For Subscribers")]}),t.canDownload&&e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:e("button",{onClick:E,className:"relative flex items-center justify-center",disabled:p,children:p?e("span",{className:"loader"}):n("Download")})}),S&&e("p",{className:"text-gray-600 mt-2 text-sm",children:S}),N&&e("p",{className:"text-red-500",children:N}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:r("span",{children:[" ",n("Duration ")," : ",t.duration.minute]})}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:r("span",{children:[" ",n("Resolution ")," : ",t.duration.resolution]})}),r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600 cursor-pointer",onClick:s=>T(s,document.URL),children:[e(W,{className:"w-4 h-4 mr-1"}),n("Share ")]}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:e(le,{user:t.streamer,userIsSubscribed:t.isCurrentSubscriber})}),v?r(w,{children:[e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",onClick:s=>P(),children:e(X,{style:{color:"red"},className:"w-4 h-4 mr-1"})}),r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",children:[e(D,{style:{color:"red"},className:"w-4 h-4 mr-1"}),e("span",{children:t==null?void 0:t.views})]})]}):r(w,{children:[e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",onClick:s=>z(),children:e(Y,{style:{color:"red"},className:"w-4 h-4 mr-1"})}),r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",children:[e(D,{style:{color:"red"},className:"w-4 h-4 mr-1"}),e("span",{children:t==null?void 0:t.views})]})]}),!t.canBePlayed&&r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-yellow-300 rounded px-2 py-1 text-gray-500 dark:text-gray-600 cursor-pointer",onClick:s=>A.Inertia.visit(route("audio.unlock",{audio:t.id})),children:[e(R,{className:"w-4 h-4 mr-1"}),n("Unlock with :tokens tokens",{tokens:t.price})]})]})]})]}),e("div",{children:t.canBePlayed?e(me,{source:q}):e("div",{className:"flex flex-col items-center",style:{justifyContent:"center"},children:r("div",{className:"relative",children:[e("img",{src:t.videoGIF?t.videoGIF:t.thumbnail,alt:"",className:"rounded-lg w-full"}),e("div",{children:r(I,{className:"h-12 mt-5 inline-flex",onClick:s=>A.Inertia.visit(route("audio.unlock",{audio:t.id})),children:[e(Z,{}),e(R,{className:"mr-2 w-6 h-6 md:w-8 md:h-8"}),n("Unlock with :tokens tokens",{tokens:t.price})]})})]})})}),e("div",{className:"mt-5 dark:text-indigo-100 hover:text-indigo-800 text-indigo-600 dark:hover:text-indigo-400",children:t.description?t.description:""})]})]})},de=({relatedaudio:t})=>{const[m,o]=a.exports.useState(""),[d,i]=a.exports.useState(!1),[h,u]=a.exports.useState("");a.exports.useEffect(()=>{u(t.data),o(t.next_page_url)},[]);const f=async v=>{i(!0);try{const c=await g.get(v);u([...h,...c.data.data]),o(c.data.next_page_url),i(!1)}catch(c){console.log(c)}};return r("div",{children:[r("div",{className:"flex justify-start items-center mt-20 mb-8",children:[e(te,{className:"text-pink-600 text-4xl mr-1"}),e("h2",{className:"text-indigo-900 text-center dark:text-zinc-200 text-4xl font-semibold",children:n("Related Audio")})]}),r("div",{className:"mt-5 mb-5",children:[t.total===0&&r("div",{className:"text-xl bg-white rounded-lg shadow text-gray-600 dark:bg-zinc-900 dark:text-white font-light p-3 flex items-center",children:[e(ee,{className:"w-12 h-12 mr-2"}),n("No audio to show")]}),h.length>0&&e(Q,{audio:h}),t.last_page>1&&e(w,{children:d?e("div",{className:"my-3",children:e(j,{})}):e(se,{className:"mt-2",processing:!t.next_page_url,onClick:()=>f(m),children:n("Load More")})})]})]})},pe=({audio:t})=>{const[m,o]=a.exports.useState(!1),{data:d,setData:i,post:h,processing:u,errors:f,reset:v}=$({description:"",audio_id:t.id}),c=l=>{i(l.target.name,l.target.type==="checkbox"?l.target.checked:l.target.value)},N=async l=>{l.preventDefault(),o(!0);try{await g({method:"post",url:route("request.audio"),data:d,headers:{"Content-Type":"multipart/form-data"}}).then(function(p){M.success(p.data.message)}).catch(function(p){M.error(p)}),o(!1)}catch(p){console.log(p)}};return e(w,{children:r("div",{className:"mt-5 mb5",children:[e("h3",{className:"text-indigo-900 text-center dark:text-zinc-200 text-4xl font-semibold",children:n("Request Audio")}),r("form",{onSubmit:N,children:[r("div",{className:"mb-5",children:[e(ie,{for:"description",value:n("Description")}),e(ce,{name:"description",value:d.description,handleChange:c,required:!0,className:"mt-1 block w-full"}),e(oe,{message:f.title,className:"mt-2"})]}),e("div",{className:"flex items-center justify-end mt-4",children:m?e("div",{className:"my-3",children:e(j,{})}):e(I,{className:"ml-4",processing:u,children:n("Request Audio")})})]})]})})};function Ke({audio:t,relatedaudio:m,url:o,inModal:d=!1}){var i;return d?e(U,{audio:t,relatedaudio:m,url:o,inModal:!0}):r(O,{children:[e(V,{title:((i=t==null?void 0:t.title)==null?void 0:i.trim())||"Default Title"}),e(U,{audio:t,relatedaudio:m,url:o,inModal:!1}),e(de,{relatedaudio:m}),e(pe,{audio:t})]})}export{Ke as default};
