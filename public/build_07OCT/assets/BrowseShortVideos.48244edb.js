import{r as o,u as q,j as s,a as t,H as ee,h,F as te}from"./app.ce2bc0e2.js";import{F as re}from"./Front.91155685.js";import{_ as a}from"./Translate.dc83ae5b.js";import{S}from"./SecondaryButton.b89b6d69.js";import{F as ae}from"./index.esm.202ce21c.js";import{S as se}from"./Spinner.85b600cb.js";import H from"./ShortVideosLoop.ec1afa0a.js";import{M as R}from"./Modal.1099fe94.js";import oe from"./SingleVideo.33accc70.js";import{T as le}from"./TextInput.0e1ed875.js";import{d as ie}from"./react-cookie-consent.esm.d4545ed5.js";import{a as de}from"./index.esm.550e16aa.js";import{A as ne}from"./AdBar.17c91c44.js";import{P as ce}from"./Pagination.ce2c1844.js";import"./iconBase.7698d573.js";import"./index.b7ddb5c7.js";import"./index.58d9d0d7.js";import"./index.f3d7e524.js";import"./react-toastify.esm.ce806bab.js";import"./index.e7e076b2.js";import"./index.esm.bb993f23.js";import"./react-tooltip.min.dabaae5c.js";/* empty css                          */import"./Loader.06d96c4a.js";import"./transition.0f9bd53b.js";import"./AuthenticatedLayout.6c76f410.js";import"./index.9d5f5c28.js";import"./PrimaryButton.0269d743.js";import"./index.a947ced8.js";function Oe({userrequest:m,videos:i,category:he,categories:$,exploreImage:j,tags:A,models:E,headTitle:me,randomvideos:C}){const[d,u]=o.exports.useState(m.sort||"Recently"),[x,D]=o.exports.useState(""),[L,n]=o.exports.useState(!1),[P,ge]=o.exports.useState(!1),[O,W]=o.exports.useState(!1),[U,F]=o.exports.useState(1),[g,z]=o.exports.useState(m.page||1),{auth:f,watchVideos:b=[]}=q().props,I=!!(f!=null&&f.user),[Y,w]=o.exports.useState(!1);o.exports.useEffect(()=>{const e=localStorage.getItem("watchedPopupShown");b.length>0&&!e&&(w(!0),localStorage.setItem("watchedPopupShown","true"))},[b]),o.exports.useEffect(()=>{I||localStorage.removeItem("watchedPopupShown")},[I]),ie(e=>{e.target.value.length>2?(n(!0),h.Inertia.reload({data:{keyword:e.target.value,sortBy:d},only:["videos"],onFinish:()=>n(!1)})):h.Inertia.reload({data:{sortBy:d,keyword:""},only:["videos"],onFinish:()=>n(!1)})},500);const M=()=>{U!=g&&d&&(F(g),h.Inertia.visit(route("short.videos.browse",{search:x,sort:d,selectedCategories:v,selectedTags:N,selectedModels:y,page:g}),{only:["videos"],preserveState:!0,onBefore:()=>n(!0),onFinish:()=>n(!1)}))},G=e=>{console.log("Page: ",e),z(e),M();let r=i.path+"?page="+e;h.Inertia.visit(r)};o.exports.useEffect(()=>{M()},[g]);const k=o.exports.useRef(),[v,T]=o.exports.useState(m.selectedCategories),[N,V]=o.exports.useState(m.selectedTags),[y,_]=o.exports.useState(m.selectedModels),J=e=>{e.preventDefault(),F(1),z(1),h.Inertia.visit(route("short.videos.browse",{search:x,sort:d,selectedCategories:v,selectedTags:N,selectedModels:y}),{only:["videos","randomvideos"],preserveState:!0,onBefore:()=>n(!0),onFinish:()=>n(!1)}),B()},K=e=>{const{value:r,checked:c}=e.target;T(c?l=>[...l,r]:l=>l.filter(p=>p!==r))},Q=e=>{const{value:r,checked:c}=e.target;V(c?l=>[...l,r]:l=>l.filter(p=>p!==r))},X=e=>{const{value:r,checked:c}=e.target;c?(console.log("event",c),_(l=>[...l,r])):_(l=>l.filter(p=>p!==r))},Z=e=>{e.preventDefault();const r="fixed inset-0 z-[9999] pt-5 px-2 overflow-scroll h-screen bg-white dark:bg-black  block w-2/3 flex-shrink-0 mr-5";k.current.className=r},B=e=>{e==null||e.preventDefault();const r="hidden lg:block w-56 lg:flex-shrink-0 lg:mr-5";console.log(`hiding filters ${r}`),k.current.className=r};return s(re,{containerClass:"w-full",extraHeader:!0,extraHeaderTitle:a("Browse Previews"),extraHeaderImage:j,extraHeaderText:"",extraImageHeight:"h-14",children:[t(ee,{title:"Previews"}),t(R,{show:O,onClose:e=>W(!1),children:P&&t(oe,{video:P,inModal:!0})}),t(R,{show:Y,onClose:()=>w(!1),children:s("div",{className:"border dark:border-zinc-800 shadow-sm p-4 rounded-lg pb-2 bg-white dark:bg-zinc-900",children:[t("h2",{className:"text-xl font-bold text-indigo-700 dark:text-white mb-4",children:a("Watched Your Videos")}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-5",children:b.map(e=>{var r;return s("div",{className:"border dark:border-zinc-800 shadow-sm rounded-lg pb-2 bg-white dark:bg-zinc-900 w-full",children:[s("div",{className:"relative",children:[t("a",{href:route("video.single.page",{id:e.slug}),"data-price":e.price,children:t("img",{src:e.thumbnail,alt:e.title,className:"mb-3"})}),t("div",{className:"absolute top-5 left-0 bg-indigo-800 text-white font-bold text-sm uppercase rounded-tr rounded-br px-2 py-1",children:e.price<1?a("Free"):t("div",{className:"flex items-center",children:e.price})})]}),s("div",{className:"inline-flex items-center px-3",children:[t("div",{className:"w-10 flex-shrink-0 mr-2",children:t("a",{href:e.streamer?route("channel",{user:e.streamer.username}):"#",children:(r=e.streamer)!=null&&r.profile_picture?t("img",{src:e.streamer.profile_picture,alt:"Streamer",className:"w-10 h-10 rounded-full"}):t("div",{className:"w-10 h-10 rounded-full bg-gray-300"})})}),t("div",{className:"h-5 overflow-hidden",children:t("a",{className:"font-semibold dark:text-indigo-100 hover:text-indigo-800 text-indigo-600 dark:hover:text-indigo-400",href:route("video.single.page",{id:e.slug}),children:e.title})})]})]},`vid-${e.id}`)})}),t("div",{className:"mt-4 text-center",children:t(S,{onClick:()=>w(!1),children:a("Close")})})]})}),s("div",{className:"flex w-full -mt-16",children:[t("form",{onSubmit:J,children:s("div",{ref:k,className:"hidden lg:block w-56 lg:flex-shrink-0 lg:mr-5",children:[t("h3",{className:"text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900 dark:text-white shadow rounded-t-lg",children:a("Search")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:t(le,{className:"w-full",name:"search",value:x,handleChange:e=>D(e.target.value),placeholder:a("Search Video")})}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900 dark:text-white shadow rounded-t-lg",children:a("Sort By")}),s("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3",children:[s("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",value:"Most",checked:d==="Most",className:"mr-2",onChange:e=>u(e.target.value)}),a("Most Viewed")]}),s("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",value:"Recently",checked:d==="Recently",className:"mr-2",onChange:e=>u(e.target.value)}),a("Newest Uploaded")]}),s("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"radio",name:"sort",checked:d==="Older",value:"Older",className:"mr-2",onChange:e=>u(e.target.value)}),a("Older Videos")]})]}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900  dark:text-white shadow rounded-t-lg",children:a("Category")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3 overflow-y-auto h-48",children:$.map(e=>s("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"checkbox",name:"categories[]",className:"mr-2",value:e.id,onChange:K,checked:v.includes(e.id.toString())}),e.category]},`catFilter-${e.id}`))}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900  dark:text-white shadow rounded-t-lg",children:a("Tags")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3 overflow-y-auto h-48",children:A.map(e=>{var r;return s("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"checkbox",name:"tags[]",className:"mr-2",value:e.id,onChange:Q,checked:N.includes((r=e==null?void 0:e.id)==null?void 0:r.toString())}),e.name]},`tagFilter-${e.id}`)})}),t("h3",{className:"mt-5 text-indigo-700 text-xl font-bold block p-3 bg-light-violet dark:bg-zinc-900  dark:text-white shadow rounded-t-lg",children:a("Models")}),t("div",{className:"bg-white dark:bg-zinc-800 rounded-b-lg shadow p-3 overflow-y-auto h-48",children:E.map(e=>s("label",{className:"flex items-center text-gray-600 dark:text-white cursor-pointer	",children:[t("input",{type:"checkbox",name:"models[]",className:"mr-2",value:e.id,onChange:X,checked:y.includes(e.id.toString())}),e.name]},`modelFilter-${e.id}`))}),L?t("div",{className:"my-3",children:t(se,{})}):t("button",{className:"mt-5 bg-indigo-500 dark:bg-zinc-800 font-semibold text-white rounded-lg px-2 py-1.5 block w-full",children:a("Apply Filters")}),t(S,{className:"mt-2",onClick:e=>h.Inertia.visit(route("videos.browse")),children:a("Reset")}),t("div",{className:"lg:hidden text-center border-t border-t-gray-300 dark:border-gray-900 py-5",children:t(S,{className:"",onClick:e=>B(e),children:a("Close")})})]})}),s("div",{className:"flex-grow",children:[s("button",{onClick:e=>Z(e),className:"mb-7 px-3 -mt-1 py-1.5 bg-indigo-500 text-white rounded-lg lg:hidden flex items-center justify-end",children:[t(de,{className:"mr-1"}),a("Show Filters")]}),i.total===0&&s("div",{className:"text-xl bg-white rounded-lg shadow text-gray-600 dark:bg-zinc-900 dark:text-white font-light p-3 flex items-center",children:[t(ae,{className:"w-12 h-12 mr-2"}),a("No videos to show")]}),i.current_page==1&&C.total>0&&s("div",{children:[t("h2",{className:"text-indigo-700 text-2xl font-bold dark:text-white",children:a("Random Previews")}),t(H,{videos:C.data}),t("h2",{className:"text-indigo-700 text-2xl font-bold dark:text-white",children:a("Filtered Previews")})]}),t(H,{videos:i.data}),i.last_page>1&&s(te,{children:[t("div",{className:"flex text-gray-600 mt-10 mb-5 text-sm",children:a("Page: :pageNumber of :lastPage",{pageNumber:i.current_page,lastPage:i.last_page})}),t(ce,{total:i.last_page*10,current:g,onChange:G,showSizeChanger:!1})]}),t("div",{className:"mt-3",children:t(ne,{})})]})]})]})}export{Oe as default};
