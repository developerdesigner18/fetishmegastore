import{r as l,i as F,u as P,j as t,a as e,H as S}from"./app.34affac1.js";import{I as f}from"./InputError.061d7836.js";import{I as u}from"./InputLabel.b86f84c0.js";import{P as g}from"./PrimaryButton.404611c6.js";import{T as c}from"./TextInput.c4f9f48a.js";import{F as q}from"./Front.2f497cc4.js";import{_ as s}from"./Translate.dc83ae5b.js";import{Q as i}from"./react-toastify.esm.208331c3.js";import{d as O}from"./index.esm.d12dd736.js";import"./iconBase.80ee2b9c.js";import"./index.d05e1090.js";import"./index.3c050530.js";import"./index.3c59162f.js";import"./react-cookie-consent.esm.ec0aff76.js";import"./transition.d8bf0980.js";import"./Modal.2d0ee4fc.js";import"./index.e7e076b2.js";function $(){const y=route().current(),[N,h]=l.exports.useState(!1),[w,b]=l.exports.useState(""),[v,p]=l.exports.useState(!1),[m,x]=l.exports.useState(!1),{data:o,setData:C,post:_,processing:E,errors:r,reset:k}=F({username:"",category:"",is_streamer:y=="streamer.signup"?"yes":"no",name:"",email:"",password:"",password_confirmation:"",is_mail_verified:m});l.exports.useEffect(()=>()=>{k("password","password_confirmation")},[]);const d=a=>{C(a.target.name,a.target.type==="checkbox"?a.target.checked:a.target.value),a.target.name==="email"&&x(!1)},I=a=>{if(a.preventDefault(),!m){i("Please verify your email before registering.");return}_(route("register"))},{categories:H,flash:n}=P().props;l.exports.useEffect(()=>{n!=null&&n.message&&i(n.message),Object.keys(r).length!==0&&Object.keys(r).forEach(a=>{i(r[a])})},[n,r]);const V=()=>{p(!0),axios.post(route("send-email-verification"),{email:o.email}).then(a=>{i("Verification email sent."),h(!0),p(!1)}).catch(a=>{i("Failed to send verification email."),p(!1)})},j=()=>{axios.post(route("verify-email-code"),{email:o.email,code:w}).then(a=>{a.data.status?(i("Email verified successfully!"),x(!0),h(!1)):i("Invalid verification code.")}).catch(a=>{i("Error verifying the code.")})};return t(q,{children:[e(S,{title:s("Register")}),e("div",{className:"flex items-center flex-col md:flex-row md:space-x-10 bg-white rounded-lg px-5 pb-6 dark:bg-zinc-900 shadow max-w-5xl mx-auto",children:e("div",{className:"flex-grow pt-10 w-full",children:t("form",{onSubmit:I,children:[e("input",{type:"hidden",name:"is_streamer",value:o.is_streamer}),t("div",{className:"mb-4",children:[e(u,{forInput:"username",value:s("Username")}),e(c,{name:"username",value:o.username,className:"mt-1 block w-full",autoComplete:"username",handleChange:d,isFocused:!0,required:!0}),e(f,{message:r.username,className:"mt-2"})]}),t("div",{className:"mt-4",children:[e(u,{forInput:"email",value:s("Email")}),t("div",{className:"grid grid-cols-[1fr_auto] items-center",children:[e(c,{type:"email",name:"email",value:o.email,className:"mt-1 block w-full",autoComplete:"email",handleChange:d,required:!0}),m?e(O,{style:{color:"green"}}):e(g,{className:"ml-2",onClick:V,processing:v,disabled:m||v,children:m?s("Verified"):s("Verify Email")})]}),e(f,{message:r.email,className:"mt-2"})]}),t("div",{className:"mt-4",children:[e(u,{forInput:"password",value:s("Password")}),e(c,{type:"password",name:"password",value:o.password,className:"mt-1 block w-full",autoComplete:"new-password",handleChange:d,required:!0}),e(f,{message:r.password,className:"mt-2"})]}),t("div",{className:"mt-4",children:[e(u,{forInput:"password_confirmation",value:s("Confirm Password")}),e(c,{type:"password",name:"password_confirmation",value:o.password_confirmation,className:"mt-1 block w-full",handleChange:d,required:!0}),e(f,{message:r.password_confirmation,className:"mt-2"})]}),e("div",{className:"flex items-center justify-end mt-4",children:e(g,{className:"ml-4",processing:E,children:s("Register")})})]})})}),N&&e("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:t("div",{className:"bg-[#f9f9f4] p-8 rounded-lg shadow-lg max-w-md w-full",children:[e("h2",{className:"text-lg font-bold text-center",children:s("Enter Verification Code")}),e(c,{type:"text",name:"verification_code",value:w,className:"mt-4 block w-full",handleChange:a=>b(a.target.value),required:!0}),e(g,{className:"mt-4 w-full",onClick:j,children:s("Verify")})]})})]})}export{$ as default};
