import{a as e,j as r,H,r as a,F as k,L as b,h as D,i as A,d as y}from"./app.34affac1.js";import{A as G}from"./AuthenticatedLayout.bb6c926f.js";import{V as $}from"./VideosLoop.bc30ed76.js";import{_ as n}from"./Translate.dc83ae5b.js";import{a as O,b as Q,c as J,d as K,e as W}from"./index.3c59162f.js";import{F as X,a as Y}from"./index.d90fd3ed.js";import{S as V}from"./Spinner.5c8cecb0.js";import{P as j}from"./PrimaryButton.404611c6.js";import{Q as _}from"./react-toastify.esm.208331c3.js";import{M,c as Z}from"./index.3c050530.js";import{j as ee}from"./index.3914dbe3.js";import{S as te}from"./SecondaryButton.36cc19fa.js";import"./react-cookie-consent.esm.ec0aff76.js";import{M as re}from"./Modal.2d0ee4fc.js";import se from"./ShareLink.88a7619d.js";import{I as ae}from"./InputLabel.b86f84c0.js";import"./TextInput.c4f9f48a.js";import ne from"./SubscribePopup.0fe72abe.js";import{I as le}from"./InputError.061d7836.js";import{T as ie}from"./Textarea.86659e81.js";import{P as oe}from"./index.45c6bf09.js";/* empty css             */import"./Front.2f497cc4.js";import"./iconBase.80ee2b9c.js";import"./index.d05e1090.js";import"./index.e7e076b2.js";import"./index.esm.d12dd736.js";import"./react-tooltip.min.0df8b080.js";/* empty css                          */import"./Loader.1271d84a.js";import"./AdBar.b2a01026.js";import"./transition.d8bf0980.js";import"./index.b07672ea.js";import"./index.ed936ace.js";import"./index.517f43d0.js";const R=({video:t,relatedvideos:m,url:i,inModal:o})=>{var F,C,L;a.exports.useState();const[p,x]=a.exports.useState(!1),[h,f]=a.exports.useState(!1);a.exports.useState(!1);const[N,c]=a.exports.useState(t.isUserFavorite),[w,l]=a.exports.useState(null),[d,v]=a.exports.useState(!1),[S,B]=a.exports.useState(""),I=async()=>{v(!0),l(null);try{console.log("Download request started...");const s=await y.post(route("video.download"),{slug:t.slug});if(s.data.status===1){B("Download will start in sometime...please wait.");const u=s.data.link;console.log("Download URL:",u);const E=await(await fetch(u)).blob(),U=window.URL.createObjectURL(E),g=document.createElement("a");g.href=U,g.setAttribute("download",`${t.slug}.mp4`),document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(U)}else l(s.data.message)}catch(s){console.error("Download error:",s),l("An error occurred while downloading the video.")}finally{v(!1)}},T=(s,u)=>{s.preventDefault(),x(u),f(!0)},z=()=>{c(!0),y.post(route("video.addToFavorite",{id:t.id}))},P=()=>{c(!1),y.post(route("video.removeFromFavorite",{id:t.id}))};a.exports.useRef(null);const q={type:"video",autoplay:!0,sources:[{src:t.videoUrl,type:"video/mp4",size:720},{src:(F=t.videoUrl360p)!=null?F:t.videoUrl,type:"video/mp4",size:360}]};return r(k,{children:[e(re,{show:h,onClose:s=>f(!1),children:p&&e(se,{link:p,inModal:!0})}),r("div",{className:`justify-center w-full ${o?"p-3":"p-0"}`,children:[r("div",{className:"flex items-start",children:[e("div",{className:"mr-5 flex flex-col items-center flex-shrink-0",children:e(b,{href:route("channel",{user:t.streamer.username}),children:e("img",{src:t.streamer.profile_picture,className:"w-14 h-14 rounded-full"})})}),r("div",{children:[e("h3",{className:"text-lg md:text-2xl font-light dark:text-indigo-100 hover:text-indigo-800 text-indigo-600 dark:hover:text-indigo-400",children:t.title}),r("div",{className:"flex items-center flex-wrap md:space-x-2 mt-1",children:[r(b,{href:route("channel",{user:t.streamer.username}),className:"text-sm text-gray-600 mr-2  dark:text-white",children:["@",t.streamer.username]}),(C=t.selectedCategory)==null?void 0:C.map((s,u)=>r(b,{href:route("videos.browse",{videocategory:s.value,slug:`-${s.label}`}),className:"text-gray-600 mr-2  inline-flex items-center space-x-1 dark:text-zinc-100 text-sm",children:[e(O,{className:"w-3"}),e("span",{children:s.label})]})),e(Q,{className:"w-3"}),e("span",{children:(L=t==null?void 0:t.tags)==null?void 0:L.map((s,u)=>r(b,{href:route("tag",{id:s.id}),className:"text-gray-600 mr-2  inline-flex items-center space-x-1 dark:text-zinc-100 text-sm",children:[" ",r("span",{children:[s.name," ",u!==t.tags.length-1&&", "]})]}))}),t.free_for_subs==="yes"&&t.price!==0&&r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:[e(ee,{className:"w-4 h-4 mr-1"}),n("Free For Subscribers")]}),t.canDownload&&e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:e("button",{onClick:I,className:"relative flex items-center justify-center",disabled:d,children:d?e("span",{className:"loader"}):n("Download")})}),S&&e("p",{className:"text-gray-600 mt-2 text-sm",children:S}),w&&e("p",{className:"text-red-500",children:w}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:r("span",{children:[" ",n("Duration ")," : ",t.duration.minute]})}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:r("span",{children:[" ",n("Resolution ")," : ",t.duration.resolution]})}),r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600 cursor-pointer",onClick:s=>T(s,document.URL),children:[e(J,{className:"w-4 h-4 mr-1"}),n("Share ")]}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:e(ne,{user:t.streamer,userIsSubscribed:t.isCurrentSubscriber})}),N?e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",onClick:s=>P(),children:e(K,{style:{color:"red"},className:"w-4 h-4 mr-1"})}):e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",onClick:s=>z(),children:e(W,{style:{color:"red"},className:"w-4 h-4 mr-1"})}),!t.canBePlayed&&r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-yellow-300 rounded px-2 py-1 text-gray-500 dark:text-gray-600 cursor-pointer",onClick:s=>D.Inertia.visit(route("video.unlock",{video:t.id})),children:[e(M,{className:"w-4 h-4 mr-1"}),n("Unlock with :tokens tokens",{tokens:t.price})]})]})]})]}),e("div",{className:"mt-5",children:t.canBePlayed?e(oe,{source:q}):e("div",{className:"flex flex-col items-center  md:flex-row space-y-5 md:space-y-0 md:space-x-5 ",style:{"justify-content":"center"},children:r("div",{className:"relative",children:[e("img",{src:t.videoGIF?t.videoGIF:t.thumbnail,alt:"",className:"rounded-lg w-full"}),e("div",{className:"absolute top-0 left-0 text-center bg-gray-700 w-full h-full bg-opacity-25 rounded-lg ",children:r("div",{className:"relative top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col justify-center",children:[e("div",{className:"w-full",children:e("div",{className:"bg-white inline-flex bg-opacity-25 rounded-full p-2",children:e(X,{className:"w-12 h-12"})})}),e("div",{children:r(j,{className:"h-12 mt-5 inline-flex",onClick:s=>D.Inertia.visit(route("video.unlock",{video:t.id})),children:[e(M,{className:"mr-2 w-6 h-6 md:w-8 md:h-8"}),n("Unlock with :tokens tokens",{tokens:t.price})]})})]})})]})})}),e("div",{className:"mt-5 dark:text-indigo-100 hover:text-indigo-800 text-indigo-600 dark:hover:text-indigo-400",children:t.description?t.description:""})]})]})},ce=({relatedvideos:t})=>{const[m,i]=a.exports.useState(""),[o,p]=a.exports.useState(!1),[x,h]=a.exports.useState("");a.exports.useEffect(()=>{h(t.data),i(t.next_page_url)},[]);const f=async N=>{p(!0);try{const c=await y.get(N);h([...x,...c.data.data]),i(c.data.next_page_url),p(!1)}catch(c){console.log(c)}};return r("div",{children:[r("div",{className:"flex justify-start items-center mt-20 mb-8",children:[e(Z,{className:"text-pink-600 text-4xl mr-1"}),e("h2",{className:"text-indigo-900 text-center dark:text-zinc-200 text-4xl font-semibold",children:n("Related Videos")})]}),r("div",{className:"mt-5 mb-5",children:[t.total===0&&r("div",{className:"text-xl bg-white rounded-lg shadow text-gray-600 dark:bg-zinc-900 dark:text-white font-light p-3 flex items-center",children:[e(Y,{className:"w-12 h-12 mr-2"}),n("No videos to show")]}),x.length>0&&e($,{videos:x}),t.last_page>1&&e(k,{children:o?e("div",{className:"my-3",children:e(V,{})}):e(te,{className:"mt-2",processing:!t.next_page_url,onClick:()=>f(m),children:n("Load More")})})]})]})},me=({video:t})=>{const[m,i]=a.exports.useState(!1),{data:o,setData:p,post:x,processing:h,errors:f,reset:N}=A({description:"",video_id:t.id}),c=l=>{p(l.target.name,l.target.type==="checkbox"?l.target.checked:l.target.value)},w=async l=>{l.preventDefault(),i(!0);try{await y({method:"post",url:route("request.video"),data:o,headers:{"Content-Type":"multipart/form-data"}}).then(function(d){_.success(d.data.message)}).catch(function(d){_.error(d)}),i(!1)}catch(d){console.log(d)}};return e(k,{children:r("div",{className:"mt-5 mb5",children:[e("h3",{className:"text-indigo-900 text-center dark:text-zinc-200 text-4xl font-semibold",children:n("Request Video")}),r("form",{onSubmit:w,children:[r("div",{className:"mb-5",children:[e(ae,{for:"description",value:n("Description")}),e(ie,{name:"description",value:o.description,handleChange:c,required:!0,className:"mt-1 block w-full"}),e(le,{message:f.description,className:"mt-2"})]}),e("div",{className:"flex items-center justify-end mt-4",children:m?e("div",{className:"my-3",children:e(V,{})}):e(j,{className:"ml-4",processing:h,children:n("Request Video")})})]})]})})};function Qe({video:t,relatedvideos:m,url:i,inModal:o=!1}){return console.log("SingleVideo rendered with inModal:",o),o?e(R,{video:t,relatedvideos:m,url:i,inModal:!0}):r(G,{children:[e(H,{title:t.title}),e(R,{video:t,relatedvideos:m,url:i,inModal:!1}),e(ce,{relatedvideos:m}),e(me,{video:t})]})}export{Qe as default};
