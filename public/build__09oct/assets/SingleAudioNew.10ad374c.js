import{a as e,j as r,H as q,r as a,d as y,F as u,L as w,h as _,i as H}from"./app.34affac1.js";import{A as G}from"./AuthenticatedLayout.bb6c926f.js";import V from"./AudioLoop.3804291f.js";import{_ as i}from"./Translate.dc83ae5b.js";import{a as $,b as K,c as Q,d as J,g as B,e as O}from"./index.3c59162f.js";import{F as W,a as X}from"./index.d90fd3ed.js";import{S as E}from"./Spinner.5c8cecb0.js";import{P as I}from"./PrimaryButton.404611c6.js";import{Q as D}from"./react-toastify.esm.208331c3.js";import{M as j,c as Y}from"./index.3c050530.js";import{j as Z}from"./index.3914dbe3.js";import{S as ee}from"./SecondaryButton.36cc19fa.js";import"./react-cookie-consent.esm.ec0aff76.js";import{M as te}from"./Modal.2d0ee4fc.js";import re from"./ShareLink.88a7619d.js";import{I as se}from"./InputLabel.b86f84c0.js";import"./TextInput.c4f9f48a.js";import ae from"./SubscribePopup.0fe72abe.js";import{I as ne}from"./InputError.061d7836.js";import{T as ie}from"./Textarea.86659e81.js";import{P as le}from"./index.45c6bf09.js";/* empty css             */import"./Front.2f497cc4.js";import"./iconBase.80ee2b9c.js";import"./index.d05e1090.js";import"./index.e7e076b2.js";import"./index.esm.d12dd736.js";import"./react-tooltip.min.0df8b080.js";/* empty css                          */import"./SingleAudio.d60254fc.js";import"./transition.d8bf0980.js";import"./Loader.1271d84a.js";import"./index.b07672ea.js";import"./index.ed936ace.js";import"./index.517f43d0.js";const M=({audio:t,relatedaudio:d,url:o,inModal:p})=>{var S,F,C;a.exports.useState();const[l,x]=a.exports.useState(!1),[f,g]=a.exports.useState(!1);a.exports.useState(!1);const[N,c]=a.exports.useState(t.isUserFavorite),[v,m]=a.exports.useState(null),[h,k]=a.exports.useState(!1),[b,A]=a.exports.useState(""),L=(s,n)=>{s.preventDefault(),x(n),g(!0)},T=()=>{c(!0),y.post(route("audio.addToFavorite",{id:t.id}))},U=()=>{c(!1),y.post(route("audio.removeFromFavorite",{id:t.id}))};a.exports.useRef(null);const R={type:"audio",autoplay:!1,sources:[{src:t.audio_file,type:"audio/mp3",size:720},{src:(S=t.videoUrl360p)!=null?S:t.audio_file,type:"audio/mp3",size:360}]};a.exports.useEffect(()=>{z()},[]);const z=()=>{y.post(route("audio.increaseAudioViews",{audio:t.id})).then(()=>{setViewIncreased(!0)}).catch(s=>{console.error("Error increasing views:",s)})},P=()=>{k(!0),A("Download shuru ho raha hai... \u0A95\u0AC3\u0AAA\u0AAF\u0ABE \u0AAA\u0ACD\u0AB0\u0AA4\u0AC0\u0A95\u0ACD\u0AB7\u0ABE \u0A95\u0AB0\u0AC7."),m(null);const s=route("audio.download",{audio:t.id});try{const n=document.createElement("a");n.href=s,n.setAttribute("download",`${t.slug}.mp3`),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>{A(""),k(!1)},4e3)}catch(n){console.error("Download shuru karne mein error:",n),m("Download shuru nahi ho saka. Kripya dobara koshish karein."),k(!1)}};return r(u,{children:[e("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"}),e(te,{show:f,onClose:s=>g(!1),children:l&&e(re,{link:l,inModal:!0})}),r("div",{className:`justify-center w-full ${p?"p-3":"p-0"}`,children:[r("div",{className:"flex items-start",children:[e("div",{className:"mr-5 flex flex-col items-center flex-shrink-0",children:e(w,{href:route("channel",{user:t.streamer.username}),children:e("img",{src:t.streamer.profile_picture,className:"w-14 h-14 rounded-full"})})}),r("div",{children:[e("h3",{className:"text-lg md:text-2xl font-light dark:text-indigo-100 hover:text-indigo-800 text-indigo-600 dark:hover:text-indigo-400",children:t.title}),r("div",{className:"flex items-center flex-wrap md:space-x-2 mt-1",children:[r(w,{href:route("channel",{user:t.streamer.username}),className:"text-sm text-gray-600 mr-2  dark:text-white",children:["@",t.streamer.username]}),(F=t.selectedCategory)==null?void 0:F.map((s,n)=>r(w,{href:route("audio.browse",{videocategory:s.value,slug:`-${s.label}`}),className:"text-gray-600 mr-2  inline-flex items-center space-x-1 dark:text-zinc-100 text-sm",children:[e($,{className:"w-3"}),e("span",{children:s.label})]})),e(K,{className:"w-3"}),e("span",{children:(C=t==null?void 0:t.tags)==null?void 0:C.map((s,n)=>r(w,{href:route("tag",{id:s.id}),className:"text-gray-600 mr-2  inline-flex items-center space-x-1 dark:text-zinc-100 text-sm",children:[" ",r("span",{children:[s.name," ",n!==t.tags.length-1&&", "]})]}))}),t.free_for_subs==="yes"&&t.price!==0&&r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:[e(Z,{className:"w-4 h-4 mr-1"}),i("Free For Subscribers")]}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:r("span",{children:[" ",i("Duration ")," : ",t.duration.minute]})}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:r("span",{children:[" ",i("Resolution ")," : ",t.duration.resolution]})}),r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600 cursor-pointer",onClick:s=>L(s,document.URL),children:[e(Q,{className:"w-4 h-4 mr-1"}),i("Share ")]}),e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-gray-100 rounded px-2 py-1 text-gray-500 dark:text-gray-600",children:e(ae,{user:t.streamer,userIsSubscribed:t.isCurrentSubscriber})}),N?r(u,{children:[e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",onClick:s=>U(),children:e(J,{style:{color:"red"},className:"w-4 h-4 mr-1"})}),r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",children:[e(B,{style:{color:"red"},className:"w-4 h-4 mr-1"}),e("span",{children:t==null?void 0:t.views})]})]}):r(u,{children:[e("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",onClick:s=>T(),children:e(O,{style:{color:"red"},className:"w-4 h-4 mr-1"})}),r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm rounded px-2 py-1 cursor-pointer",children:[e(B,{style:{color:"red"},className:"w-4 h-4 mr-1"}),e("span",{children:t==null?void 0:t.views})]})]}),t.audio_file&&t.audio&&e(u,{children:!t.canBePlayed&&r("div",{className:"mt-1 md:mt-0 inline-flex items-center text-sm bg-yellow-300 rounded px-2 py-1 text-gray-500 dark:text-gray-600 cursor-pointer",onClick:s=>_.Inertia.visit(route("audio.unlock",{audio:t.id})),children:[e(j,{className:"w-4 h-4 mr-1"}),i("Unlock with :tokens tokens",{tokens:t.price})]})})]})]})]}),e("div",{children:!t.audio_file&&!t.audio?e("div",{className:"flex flex-col items-center justify-center py-10",children:e("p",{className:"text-red-500 text-lg font-semibold",children:"Something is wrong, audio was not found."})}):e(u,{children:t.canBePlayed?r(u,{children:[r("div",{className:"flex justify-center items-center mt-3",children:[e("div",{style:{width:"95%",margin:"auto"},children:e(le,{source:R})}),t.canDownload&&e("button",{onClick:P,disabled:h,className:"flex justify-center items-center bg-gray-100 rounded px-3 py-2 ml-3",style:{width:"5%",margin:"auto",textAlign:"center",border:"1px solid #ccc",cursor:"pointer"},children:h?e("span",{className:"loader"}):e("i",{className:"fa fa-download text-xl","aria-hidden":"true"})})]}),b&&e("p",{className:"text-gray-600 mt-2 text-sm",children:b}),v&&e("p",{className:"text-red-500",children:v})]}):e("div",{className:"flex flex-col items-center",style:{justifyContent:"center"},children:r("div",{className:"relative",children:[e("img",{src:t.videoGIF?t.videoGIF:t.thumbnail,alt:"",className:"rounded-lg w-full"}),e("div",{children:r(I,{className:"h-12 mt-5 inline-flex",onClick:s=>_.Inertia.visit(route("audio.unlock",{audio:t.id})),children:[e(W,{}),e(j,{className:"mr-2 w-6 h-6 md:w-8 md:h-8"}),i("Unlock with :tokens tokens",{tokens:t.price})]})})]})})})}),e("div",{className:"mt-5 dark:text-indigo-100 hover:text-indigo-800 text-indigo-600 dark:hover:text-indigo-400",children:t.description?t.description:""})]})]})},oe=({relatedaudio:t})=>{const[d,o]=a.exports.useState(""),[p,l]=a.exports.useState(!1),[x,f]=a.exports.useState("");a.exports.useEffect(()=>{f(t.data),o(t.next_page_url)},[]);const g=async N=>{l(!0);try{const c=await y.get(N);f([...x,...c.data.data]),o(c.data.next_page_url),l(!1)}catch(c){console.log(c)}};return r("div",{children:[r("div",{className:"flex justify-start items-center mt-20 mb-8",children:[e(Y,{className:"text-pink-600 text-4xl mr-1"}),e("h2",{className:"text-indigo-900 text-center dark:text-zinc-200 text-4xl font-semibold",children:i("Related Audio")})]}),r("div",{className:"mt-5 mb-5",children:[t.total===0&&r("div",{className:"text-xl bg-white rounded-lg shadow text-gray-600 dark:bg-zinc-900 dark:text-white font-light p-3 flex items-center",children:[e(X,{className:"w-12 h-12 mr-2"}),i("No audio to show")]}),x.length>0&&e(V,{audio:x}),t.last_page>1&&e(u,{children:p?e("div",{className:"my-3",children:e(E,{})}):e(ee,{className:"mt-2",processing:!t.next_page_url,onClick:()=>g(d),children:i("Load More")})})]})]})},ce=({audio:t})=>{const[d,o]=a.exports.useState(!1),{data:p,setData:l,post:x,processing:f,errors:g,reset:N}=H({description:"",audio_id:t.id}),c=m=>{l(m.target.name,m.target.type==="checkbox"?m.target.checked:m.target.value)},v=async m=>{m.preventDefault(),o(!0);try{await y({method:"post",url:route("request.audio"),data:p,headers:{"Content-Type":"multipart/form-data"}}).then(function(h){D.success(h.data.message)}).catch(function(h){D.error(h)}),o(!1)}catch(h){console.log(h)}};return e(u,{children:r("div",{className:"mt-5 mb5",children:[e("h3",{className:"text-indigo-900 text-center dark:text-zinc-200 text-4xl font-semibold",children:i("Request Audio")}),r("form",{onSubmit:v,children:[r("div",{className:"mb-5",children:[e(se,{for:"description",value:i("Description")}),e(ie,{name:"description",value:p.description,handleChange:c,required:!0,className:"mt-1 block w-full"}),e(ne,{message:g.title,className:"mt-2"})]}),e("div",{className:"flex items-center justify-end mt-4",children:d?e("div",{className:"my-3",children:e(E,{})}):e(I,{className:"ml-4",processing:f,children:i("Request Audio")})})]})]})})};function $e({audio:t,relatedaudio:d,url:o,inModal:p=!1}){var l;return p?e(M,{audio:t,relatedaudio:d,url:o,inModal:!0}):r(G,{children:[e(q,{title:((l=t==null?void 0:t.title)==null?void 0:l.trim())||"Default Title"}),e(M,{audio:t,relatedaudio:d,url:o,inModal:!1}),e(oe,{relatedaudio:d}),e(ce,{audio:t})]})}export{$e as default};
